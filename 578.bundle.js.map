{"version":3,"file":"578.bundle.js","sources":["webpack://rspack-project/./src/types/menu/types.ts","webpack://rspack-project/./src/components/menu/CustomMenu.tsx","webpack://rspack-project/./src/hooks/use-match-router/index.tsx","webpack://rspack-project/./src/types/tab/index.ts","webpack://rspack-project/./src/components/Tab/DraggableTab.tsx","webpack://rspack-project/./src/stores/user.ts","webpack://rspack-project/./src/layouts/header/user.tsx","webpack://rspack-project/./src/layouts/AdminLayout.tsx","webpack://rspack-project/./src/layouts/common/use-user-detail.tsx"],"sourcesContent":["export type Menu = {\r\n    id: string;\r\n    icon: string;\r\n    title: string;\r\n    path: string;\r\n    filePath: string;\r\n    parentId: string;\r\n    authCode: string;\r\n    type?: number;\r\n    children?: Menu[];\r\n    show:boolean;\r\n    parentPaths?: string[];\r\n}\r\n\r\nexport enum MenuType {\r\n    Catalog = 1,\r\n    Menu = 2,\r\n    Button = 3\r\n}","import { memo, useState } from 'react';\r\nimport { Menu } from '@/types/menu'\r\nimport { useconfigStore } from '@/stores/config';\r\n\r\nimport './CustomMenu.css'\r\n\r\nexport type MenuItemProps = {\r\n    item: Menu;\r\n    icon: string;\r\n    active: Boolean;\r\n    onClick: (item: Menu) => void;\r\n}\r\n\r\nexport type MenuProps = {\r\n    items: Menu[] | null | undefined;\r\n    onSelect: (item: Menu) => void;\r\n    activeKey: string | null;\r\n}\r\n\r\n// 菜单项组件\r\nconst MenuItem = memo(({ item, onClick, active, icon }: MenuItemProps) => {\r\n    const [expanded, setExpanded] = useState(false);\r\n    const { collapsed } = useconfigStore();\r\n    const hasChildren = item.children && item.children.length > 0;\r\n    const handleClick = () => {\r\n        if (hasChildren) {\r\n            setExpanded(!expanded);\r\n        } else if (item.path) {\r\n            onClick(item);\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"menu-group\">\r\n            <div\r\n                className={`menu-item ${active ? 'active' : ''}`}\r\n                // onClick={() => onClick(item)}\r\n                onClick={handleClick}\r\n            >\r\n                <div className='flex'>\r\n                    <span className='menu-item-icon'><i className={collapsed ? icon + ' fa-lg fa-fw' : icon}></i></span>\r\n                    <span className={collapsed ? 'menu-item-title' : 'menu-item-title active'}>{item.title}</span>\r\n                    {hasChildren && (\r\n                        <span className={collapsed ? 'menu-arrow' : 'menu-arrow active'}><i className={expanded ? 'fas fa-angle-down' : 'fas fa-angle-right'}></i></span>\r\n                    )}\r\n                </div>\r\n\r\n            </div>\r\n            {hasChildren && expanded && (\r\n                <div className=\"submenu\">\r\n                    {item.children?.map((child: Menu) => (\r\n                        <MenuItem\r\n                            key={child.id}\r\n                            item={child}\r\n                            onClick={() => onClick(child)}\r\n                            active={active}\r\n                            icon={child.icon}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>)\r\n\r\n});\r\n\r\n// 菜单组件\r\nconst CustomMenu = ({ items, onSelect, activeKey }: MenuProps) => (\r\n    <div className=\"menu\">\r\n        {items?.map((item: Menu) => (\r\n            <MenuItem\r\n                key={item.id}\r\n                item={item}\r\n                onClick={onSelect}\r\n                active={item.id == activeKey}\r\n                icon={item.icon}\r\n            />\r\n\r\n        ))}\r\n\r\n    </div>\r\n\r\n);\r\nexport default CustomMenu;","import { useEffect, useState } from 'react';\r\nimport { useLocation, useMatches, useOutlet } from 'react-router-dom';\r\n\r\ninterface MatchRouteType {\r\n  // 菜单名称\r\n  title: string;\r\n  // tab对应的url\r\n  pathname: string;\r\n  // 要渲染的组件\r\n  children: any;\r\n  // 路由，和pathname区别是，详情页 pathname是 /:id，routePath是 /1\r\n  routePath: string;\r\n  // 图标\r\n  icon?: string;\r\n}\r\n\r\nexport function useMatchRoute(): MatchRouteType | undefined {\r\n  // 获取路由组件实例\r\n  const children = useOutlet();\r\n  // 获取所有路由\r\n  const matches = useMatches();\r\n  // 获取当前url\r\n  const { pathname } = useLocation();\r\n\r\n  const [matchRoute, setMatchRoute] = useState<MatchRouteType | undefined>();\r\n  \r\n  // 监听pathname变了，说明路由有变化，重新匹配，返回新路由信息\r\n  useEffect(() => {\r\n\r\n    // 获取当前匹配的路由\r\n    const lastRoute = matches[matches.length - 1];\r\n\r\n    if (!lastRoute?.handle) return;\r\n\r\n    setMatchRoute({\r\n      title: (lastRoute?.handle as any)?.name,\r\n      pathname,\r\n      children,\r\n      routePath: lastRoute?.pathname || '',\r\n      icon: (lastRoute?.handle as any)?.icon,\r\n    });\r\n\r\n  }, [pathname])\r\n\r\n\r\n  return matchRoute;\r\n}\r\n","export * from './types';\r\n\r\n// /src/layouts/useTabs.tsx \r\nimport { useMatchRoute } from '@/hooks/use-match-router';\r\nimport { router } from '@/router';\r\nimport { useLocalStorageState } from 'ahooks';\r\nimport { omit } from 'lodash';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\n\r\nexport interface KeepAliveTab {\r\n  title: string;\r\n  routePath: string;\r\n  key: string;\r\n  pathname: string;\r\n  icon?: string;\r\n  children: React.ReactNode;\r\n}\r\n\r\nfunction getKey() {\r\n  return new Date().getTime().toString();\r\n}\r\n\r\nexport function useTabs() {\r\n  // 存放页面记录\r\n  const [keepAliveTabs, setKeepAliveTabs] = useLocalStorageState<KeepAliveTab[]>('keepAliveTabs', {\r\n    defaultValue: [],\r\n    serializer: value => {\r\n      // 把 children 剔除掉，不然会报错\r\n      return JSON.stringify(value.map(item => omit(item, ['children'])))\r\n    },\r\n   });\r\n  // 当前激活的tab\r\n  const [activeTabRoutePath, setActiveTabRoutePath] = useState<string>('');\r\n\r\n  const matchRoute = useMatchRoute();\r\n\r\n  // 关闭tab\r\n  const closeTab = useCallback(\r\n    (routePath: string = activeTabRoutePath || '') => {\r\n\r\n      if (!keepAliveTabs?.length) {\r\n        return;\r\n      }\r\n\r\n      const index = (keepAliveTabs || []).findIndex(o => o.routePath === routePath);\r\n      if (keepAliveTabs[index].routePath === activeTabRoutePath && keepAliveTabs.length > 1) {\r\n        if (index > 0) {\r\n          router.navigate(keepAliveTabs[index - 1].routePath);\r\n        } else {\r\n          router.navigate(keepAliveTabs[index + 1].routePath);\r\n        }\r\n      }\r\n      keepAliveTabs.splice(index, 1);\r\n\r\n      setKeepAliveTabs([...keepAliveTabs]);\r\n    },\r\n    [activeTabRoutePath],\r\n  );\r\n\r\n  // 关闭除了自己其它tab\r\n  const closeOtherTab = useCallback((routePath: string = activeTabRoutePath || '') => {\r\n    if (!keepAliveTabs?.length) {\r\n      return;\r\n    }\r\n    const tab = keepAliveTabs.find(o => o.routePath === routePath);\r\n    setKeepAliveTabs(keepAliveTabs.filter(o => o.routePath === routePath));\r\n    router.navigate(tab?.pathname || routePath);\r\n  }, [activeTabRoutePath]);\r\n\r\n  // 刷新tab\r\n  const refreshTab = useCallback((routePath: string = activeTabRoutePath || '') => {\r\n    setKeepAliveTabs(prev => {\r\n      const index = (prev || []).findIndex(tab => tab.routePath === routePath);\r\n\r\n      if (index >= 0 && prev) {\r\n        // 这个是react的特性，key变了，组件会卸载重新渲染\r\n        prev[index].key = getKey();\r\n      }\r\n\r\n      return [...prev || []];\r\n    });\r\n  }, [activeTabRoutePath]);\r\n\r\n  useEffect(() => {\r\n    if (!matchRoute) return;\r\n\r\n    const existKeepAliveTab = (keepAliveTabs || []).find(o => o.routePath === matchRoute?.routePath);\r\n\r\n    // 如果不存在则需要插入\r\n    if (!existKeepAliveTab) {\r\n      setKeepAliveTabs([...(keepAliveTabs || []), {\r\n        title: matchRoute.title,\r\n        key: getKey(),\r\n        routePath: matchRoute.routePath,\r\n        pathname: matchRoute.pathname,\r\n        children: matchRoute.children,\r\n        icon: matchRoute.icon,\r\n      }]);\r\n    } else if (existKeepAliveTab.pathname !== matchRoute.pathname) {\r\n      // 如果是同一个路由，但是参数不同，我们只需要刷新当前页签并且把pathname设置为新的pathname， children设置为新的children\r\n      setKeepAliveTabs(prev => {\r\n        const index = (prev || []).findIndex(tab => tab.routePath === matchRoute.routePath);\r\n        if (index >= 0 && prev) {\r\n          prev[index].key = getKey();\r\n          prev[index].pathname = matchRoute.pathname;\r\n          prev[index].children = matchRoute.children;\r\n        }\r\n        return [...(prev || [])];\r\n      });\r\n    } else if (!existKeepAliveTab.children) {\r\n      // 如果pathname相同，但是children为空，说明重缓存中加载的数据，我们只需要刷新当前页签并且把children设置为新的children\r\n      setKeepAliveTabs(prev => {\r\n        const index = (prev || []).findIndex(tab => tab.routePath === matchRoute.routePath);\r\n        if (index >= 0 && prev) {\r\n          prev[index].key = getKey();\r\n          prev[index].children = matchRoute.children;\r\n        }\r\n        return [...(prev || [])];\r\n      });\r\n    }\r\n    setActiveTabRoutePath(matchRoute.routePath);\r\n  }, [matchRoute])\r\n\r\n  return {\r\n    tabs: keepAliveTabs,\r\n    activeTabRoutePath,\r\n    closeTab,\r\n    closeOtherTab,\r\n    refreshTab,\r\n    setTabs: setKeepAliveTabs,\r\n  }\r\n}","import type { DraggableTabsProps, DragItem, Tab, tabProps } from '@/types/tab'\r\nimport './index.css'\r\nimport { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// 页签组件\r\nconst Tab = ({ tab, active, onClose, onDragStart, onDragOver, onDrop }: tabProps) => (\r\n    <div className={`tab ${active ? 'active' : ''}`}\r\n        draggable\r\n        onDragStart={onDragStart}\r\n        onDragOver={onDragOver}\r\n        onDrop={onDrop}\r\n    >\r\n        <span>{tab.label}</span>\r\n        {/* {tab.closable && ( */}\r\n        <span className=\"close-icon\" onClick={(e) => {\r\n            e.stopPropagation();\r\n            onClose(tab.key,'remove');\r\n        }}>×</span>\r\n        {/* )} */}\r\n    </div>\r\n);\r\n\r\n// 页签组容器\r\nconst DraggableTab = ({ tabs, activeTab, onTabsChange, onClose }: DraggableTabsProps) => {\r\n    // const { setTab, setTabs } = tabSlice()\r\n    const [dragItem, setDragItem] = useState<DragItem | null>(null);\r\n    const navigate = useNavigate()\r\n\r\n    // 处理拖拽开始\r\n    const handleDragStart = (e: React.DragEvent<HTMLDivElement>, index: number) => {\r\n        setDragItem({ index, id: e.currentTarget.id });\r\n        e.dataTransfer.effectAllowed = 'move';\r\n        // 设置拖拽图像\r\n        e.dataTransfer.setDragImage(e.currentTarget, 10, 10);\r\n    };\r\n\r\n    // 处理拖拽经过\r\n    const handleDragOver = (e: React.DragEvent<HTMLDivElement>, _index: number) => {\r\n        e.preventDefault();\r\n        e.dataTransfer.dropEffect = 'move';\r\n    };\r\n\r\n    // 处理放置\r\n    const handleDrop = (e: React.DragEvent<HTMLDivElement>, index: number) => {\r\n        e.preventDefault();\r\n        if (dragItem) {\r\n            const newTabs = [...tabs];\r\n            const movedItem = newTabs[dragItem.index];\r\n            newTabs.splice(dragItem.index, 1);\r\n            newTabs.splice(index, 0, movedItem);\r\n            //setTabs(newTabs)\r\n            //onChange(index);\r\n            //onTabSelect(dragItem.id)\r\n            setDragItem(null);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"\">\r\n            <div className='tablist flex flex-nowrap flex-row self-cente w-auto'>\r\n                {tabs.map((tab, index) => (\r\n                    <div id={tab.key}\r\n                        key={tab.key}\r\n                        className='w-auto h-full'\r\n                        onClick={() => { onTabsChange }}\r\n                    >\r\n                    <Tab\r\n                        tab={tab}\r\n                        active={tab.key === activeTab}\r\n                        onClose={onClose}\r\n                        onDragStart={(e) => handleDragStart(e, index)}\r\n                        onDragOver={(e) => handleDragOver(e, index)}\r\n                        onDrop={(e) => handleDrop(e, index)}\r\n                    />\r\n\r\n                    </div>\r\n\r\n                ))}\r\n            </div>\r\n\r\n            <div className='tabs-body relative mt-5'>\r\n                {tabs.map((tab, index) => (\r\n                    <div key={tab.key} className={`tab-content  ${tab.key === activeTab ? 'active' : ''}`}>\r\n                        {tab.children && (tab.children)}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n        </div>\r\n\r\n    )\r\n};\r\nexport default DraggableTab;","\r\nimport { UserState } from '@/hooks/use-auth/types'\r\nimport { create } from 'zustand'\r\nimport { persist } from 'zustand/middleware'\r\n\r\nexport const useUserStore = create<UserState>()(\r\n  persist(\r\n    (set) => ({\r\n      user: null,\r\n      setUser: (user) => set({ user }),\r\n      logout:() =>{\r\n        set({})\r\n      }\r\n    }),\r\n    {\r\n      name: 'user-storage',\r\n    }\r\n  )\r\n)","\r\nimport { useconfigStore } from \"@/stores/config\";\r\nimport { useUserStore } from \"@/stores/user\";\r\nimport { Avatar, Dropdown, MenuProps, Space, Switch } from \"antd\";\r\n\r\nconst User = () => {\r\n    const { user, logout } = useUserStore();\r\n    const {darkMode,setDarkMode} = useconfigStore()\r\n    const apiUrl = '';\r\n    const handlelogout = () => {\r\n        logout()\r\n    }\r\n    const items: MenuProps['items'] = [\r\n        {\r\n            key: '1',\r\n            label: 'My Account',\r\n            disabled: true,\r\n        },\r\n        {\r\n            type: 'divider',\r\n        },\r\n        {\r\n            key: '2',\r\n            label: '退出',\r\n            icon: '',\r\n            extra: '',\r\n            onClick: () => {\r\n                handlelogout()\r\n            }\r\n        },\r\n    ];\r\n\r\n    const handleSwitchTheme = (value: any) => {\r\n        if (value == true) {\r\n            setDarkMode(true);\r\n        }\r\n        else {\r\n            setDarkMode(false);\r\n        }\r\n        document.documentElement.classList.toggle(\r\n            \"dark\",\r\n            darkMode && window.matchMedia(\"(prefers-color-scheme: dark)\").matches);\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-row h-full\">\r\n            <div className=\"w-14 self-center\">\r\n                <Switch onClick={handleSwitchTheme} />\r\n            </div>\r\n            <div className=\"w-18 self-center\"><Dropdown menu={{ items }}>\r\n                <a onClick={(e) => e.preventDefault()}>\r\n                    <label className=\"text-center\">{user?.name}</label>  <Avatar src={apiUrl + user?.avatar} />\r\n                </a>\r\n            </Dropdown> </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default User;","import React, { ComponentType, useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\n\r\nimport CustomMenu from '@/components/menu/CustomMenu'\r\nimport { useconfigStore } from '@/stores/config';\r\nimport { Menu } from '@/types/menu';\r\nimport { KeepAliveTab, Tab, useTabs } from '@/types/tab';\r\nimport DraggableTab from '@/components/Tab/DraggableTab';\r\nimport User from '@/layouts/header/user';\r\nimport { Outlet, Route, Routes, useLocation, useNavigate } from 'react-router-dom';\r\nimport { useMatchRoute } from '@/hooks/use-match-router';\r\nimport { router } from '@/router';\r\nimport { useUserDetail } from './common/use-user-detail';\r\nimport { useUserStore } from '@/stores/user';\r\n\r\n\r\nconst AdminLayout = () => {\r\n  // const { tabs, setTab, setTabs } = tabSlice();\r\n  const { loading } = useUserDetail();\r\n  const {\r\n    activeTabRoutePath,\r\n    tabs = [],\r\n    closeTab,\r\n    refreshTab,\r\n    closeOtherTab,\r\n    setTabs,\r\n  } = useTabs();\r\n\r\n  const { collapsed, setCollapsed } = useconfigStore();\r\n  // 当前激活的页签key\r\n  const [activeTab, setActiveTab] = useState('');\r\n  const { user } = useUserStore()\r\n  const menus = user?.permissions;\r\n  const navigate = useNavigate()\r\n  const location = useLocation()\r\n  const hasMounted = useRef(false);\r\n  const matchRoute = useMatchRoute()\r\n\r\n  // 路由变化时处理标签页\r\n  useEffect(() => {\r\n    if (hasMounted.current) return;\r\n    hasMounted.current = true;\r\n\r\n  }, [location.pathname])\r\n\r\n  // 处理菜单点击\r\n  const handleMenuSelect = (item: Menu) => {\r\n    if (item.children) {\r\n\r\n    }\r\n    else {\r\n      \r\n      setActiveTab(item.id);\r\n      navigate(item.path);\r\n    }\r\n\r\n  }\r\n\r\n  // 关闭页签\r\n  const onTabEdit = (\r\n    targetKey: React.MouseEvent | React.KeyboardEvent | string,\r\n    action: 'add' | 'remove',\r\n  ) => {\r\n    if (action === 'remove') {\r\n      closeTab(targetKey as string);\r\n    }\r\n  };\r\n\r\n  const tabItems = useMemo(() => {\r\n    return tabs.map(tab => {\r\n      return {\r\n        key: tab.routePath,\r\n        label: tab.title,\r\n        children: (\r\n          <div\r\n            key={tab.key}\r\n            className='overflow-y-auto'\r\n          >\r\n              {tab.children}\r\n          </div>\r\n        ),\r\n        closable: tabs.length > 1, // 剩最后一个就不能删除了\r\n      }\r\n    })\r\n  }, [tabs]);\r\n\r\n\r\n   const onTabsChange = useCallback((tabRoutePath: string) => {\r\n    router.navigate(tabRoutePath);\r\n  }, []);\r\n\r\n  return (\r\n    <div className='relative isolate flex min-h-svh w-full bg-white max-lg:flex-col lg:bg-zinc-100 dark:bg-zinc-900 dark:lg:bg-zinc-950'>\r\n      <div className={collapsed ? 'h-full w-20' : 'h-full w-64 lg:w-48 menu-slide bg-transparent transition-all top-header fixed box-border left-0 bottom-0 overflow-y-auto px-[16px] max-md:hidden dark:text-white bg-white'}>\r\n        <div className=\"h-10\"></div>\r\n        <CustomMenu\r\n          items={menus}\r\n          onSelect={handleMenuSelect}\r\n          activeKey={activeTab}\r\n        />\r\n      </div>\r\n      <main className={collapsed ? 'flex flex-1 flex-col pb-2' : 'flex flex-1 flex-col pb-2 lg:min-w-0 lg:pt-2 lg:pr-2 lg:pl-64'}>\r\n        <div className='h-16 bg-white ml-4 mr-4 '>\r\n          <div className=\"flex items-stretch h-full\">\r\n            <div className='w-14 self-center'>\r\n              <div className='text-center' onClick={() => setCollapsed(!collapsed)}>\r\n                <i className={collapsed ? 'fas fa-indent fa-fw fa-lg' : 'fas fa-outdent fa-fw fa-lg'}></i>\r\n              </div>\r\n            </div>\r\n            <div className='w-64 flex items-stretch'>\r\n\r\n            </div>\r\n            <div className='w-32'>\r\n              <User></User>\r\n            </div>\r\n          </div>\r\n          <div className='w-100 flex items-stretch mt-5'>\r\n            {tabs ? <DraggableTab tabs={tabItems} activeTab={activeTab}\r\n              onTabsChange={onTabsChange}\r\n              onClose={onTabEdit} /> : <Outlet />}\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\nexport default AdminLayout;","import Result404 from '@/components/exception/404';\r\nimport { authService } from '@/api/authAPI';\r\nimport { Menu, MenuType } from '@/types/menu';\r\n// import { useWebSocketMessage } from '@/hooks/use-websocket';\r\nimport { router } from '@/router';\r\nimport { replaceRoutes } from '@/router/router-utils';\r\n//import { useGlobalStore } from '@/stores/global';\r\n// import { SocketMessage, useMessageStore } from '@/stores/message';\r\n//import { useUserStore } from '@/stores/user';\r\nimport { pages } from '@/utils/pages';\r\nimport { useRequest, useUpdateEffect } from 'ahooks';\r\nimport { lazy, useEffect, useState } from 'react';\r\nimport { useconfigStore } from '@/stores/config';\r\nimport { useUserStore } from '@/stores/user';\r\nimport { User } from '@/hooks/use-auth/types';\r\n\r\nexport type CurrentUser = User & { flatMenus: Menu[], menus: Menu[], authList: string[] }\r\n\r\nexport function useUserDetail() {\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const { refreshToken, token} = useconfigStore()\r\n  const { setUser } = useUserStore();\r\n  //   const { setLatestMessage } = useMessageStore();\r\n\r\n  // 当获取完用户信息后，手动连接\r\n  //   const { latestMessage, connect, disconnect } = useWebSocketMessage(\r\n  //     `${window.location.protocol.replace('http', 'ws')}//${window.location.host}/ws/?token=${token}`,\r\n  //     { manual: true }\r\n  //   );\r\n\r\n  const { data: currentUserDetail, loading: requestLoading } = useRequest(\r\n    authService.getCurrentUser,\r\n    {\r\n      refreshDeps: [refreshToken],\r\n      onError: () => {\r\n        router.navigate('/login');\r\n      }\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!currentUserDetail) return;\r\n\r\n    setLoading(true);\r\n\r\n    function formatMenus(\r\n      menus: Menu[],\r\n      menuGroup: Record<string, Menu[]>,\r\n      routes: Menu[],\r\n      parentMenu?: Menu\r\n    ): Menu[] {\r\n      return menus.map(menu => {\r\n        const children = menuGroup[menu.id!];\r\n\r\n        const parentPaths = parentMenu?.parentPaths || [];\r\n        const lastPath = parentPaths[parentPaths.length - 1];\r\n        const path = (parentMenu ? `${lastPath}${menu.path}` : menu.path) || '';\r\n\r\n        routes.push({\r\n          ...menu,\r\n          path,\r\n          parentPaths,\r\n        });\r\n\r\n        return {\r\n          ...menu,\r\n          path,\r\n          parentPaths,\r\n          children: children?.length ? formatMenus(children, menuGroup, routes, {\r\n            ...menu,\r\n            parentPaths: [...parentPaths, path || ''].filter(o => o),\r\n          }) : undefined,\r\n        };\r\n      });\r\n    }\r\n\r\n    const { menus = [],permissions } = currentUserDetail as CurrentUser;\r\n\r\n    const menuGroup = permissions?.reduce<Record<string, Menu[]>>((prev, menu) => {\r\n      if (!menu.parentId) {\r\n        return prev;\r\n      }\r\n\r\n      if (!prev[menu.parentId]) {\r\n        prev[menu.parentId] = [];\r\n      }\r\n\r\n      prev[menu.parentId].push(menu);\r\n      return prev;\r\n    }, {}) as Record<string, Menu[]>;\r\n\r\n    const routes: Menu[] = [];\r\n\r\n    const currentUser: CurrentUser = {\r\n      ...currentUserDetail,\r\n      flatMenus: routes,\r\n      menus: formatMenus(permissions?.filter((o: { parentId: any; }) => !o.parentId) as Menu[], menuGroup, routes),\r\n      authList: menus\r\n        .filter((menu) => menu.type === MenuType.Button && menu.authCode)\r\n        .map((menu: { authCode: any; }) => menu.authCode!),\r\n    };\r\n\r\n    // replaceRoutes('*', [\r\n    //   ...routes.map(menu => {\r\n    //     return ({\r\n    //       path: `/*${menu.path}`,\r\n    //       id: `/*${menu.path}`,\r\n    //       Component: menu.filePath ? pages[menu.filePath] ? lazy(pages[menu.filePath]) : Result404 : Result404,\r\n    //       handle: {\r\n    //         parentPaths: menu.parentPaths,\r\n    //         path: menu.path,\r\n    //         name: menu.title,\r\n    //         icon: menu.icon,\r\n    //       },\r\n    //     })\r\n    //   }), {\r\n    //     id: '*',\r\n    //     path: '*',\r\n    //     Component: Result404,\r\n    //     handle: {\r\n    //       path: '404',\r\n    //       name: '404',\r\n    //     },\r\n    //   }\r\n    // ]);\r\n\r\n    setUser(currentUser);\r\n\r\n    // replace一下当前路由，为了触发路由匹配\r\n    router.navigate(`${location.pathname}${location.search}`, { replace: true });\r\n\r\n    setLoading(false);\r\n\r\n    // connect && connect();\r\n  }, [currentUserDetail, setUser]);\r\n\r\n\r\n  //   useUpdateEffect(() => {\r\n  //     if (latestMessage?.data) {\r\n  //       try {\r\n  //         const socketMessage = JSON.parse(latestMessage?.data) as SocketMessage;\r\n  //         setLatestMessage(socketMessage)\r\n  //       } catch {\r\n  //         console.error(latestMessage?.data);\r\n  //       }\r\n  //     }\r\n  //   }, [latestMessage]);\r\n\r\n  //   useUpdateEffect(() => {\r\n  //     if (token) {\r\n  //       connect && connect();\r\n  //     }\r\n  //   }, [token])\r\n\r\n  return {\r\n    loading: requestLoading || loading,\r\n    //disconnectWS: disconnect,\r\n  }\r\n}"],"names":["MenuType","MenuItem","memo","_item_children","item","onClick","active","icon","expanded","setExpanded","useState","collapsed","useconfigStore","hasChildren","child","items","onSelect","activeKey","useMatchRoute","children","useOutlet","matches","useMatches","pathname","useLocation","matchRoute","setMatchRoute","useEffect","_lastRoute_handle","_lastRoute_handle1","lastRoute","getKey","Date","Tab","tab","onClose","onDragStart","onDragOver","onDrop","e","tabs","activeTab","onTabsChange","dragItem","setDragItem","useNavigate","index","handleDrop","newTabs","movedItem","useUserStore","create","persist","set","user","logout","darkMode","setDarkMode","Switch","value","document","window","Dropdown","Avatar","apiUrl","loading","useUserDetail","setLoading","refreshToken","token","setUser","currentUserDetail","requestLoading","useRequest","authService","router","menus","permissions","menuGroup","prev","menu","routes","formatMenus","parentMenu","parentPaths","lastPath","path","o","undefined","location","activeTabRoutePath","closeTab","refreshTab","closeOtherTab","setTabs","useTabs","keepAliveTabs","setKeepAliveTabs","useLocalStorageState","JSON","omit","setActiveTabRoutePath","useCallback","routePath","existKeepAliveTab","setCollapsed","setActiveTab","navigate","hasMounted","useRef","tabItems","useMemo","tabRoutePath","CustomMenu","User","DraggableTab","targetKey","action","Outlet"],"mappings":"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"}