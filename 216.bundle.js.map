{"version":3,"file":"216.bundle.js","sources":["webpack://rspack-project/./src/api/authAPI.ts"],"sourcesContent":["import { LoginCredentials, RegisterData, User } from '../hooks/use-auth/types';\r\nimport { useconfigStore } from '@/stores/config';\r\nimport { apiService } from '@/request/api.service';\r\n\r\nexport const authService = {\r\n    // 获取当前用户\r\n    getCurrentUser: async () => {\r\n        const response = await apiService.post<User>(`/user/detail`);\r\n        return response.data;\r\n    },\r\n    // 登录请求\r\n    login: async (credentials: LoginCredentials) => {\r\n        const response = await apiService.post('/auth/login', credentials)\r\n        return response.data\r\n    },\r\n    // 注册请求\r\n    register: async (userData: RegisterData) => {\r\n        const response = await apiService.post(`/auth/register`, userData);\r\n        return response;\r\n    },\r\n    logout: async (): Promise<void> => {\r\n        const refreshToken = useconfigStore.getState().refreshToken\r\n        if (refreshToken) {\r\n            try {\r\n                await apiService.post('/auth/logout', { refreshToken })\r\n            } catch (error) {\r\n                console.error('Logout API error:', error)\r\n            }\r\n        }\r\n        //useAuthStore.getState().logout()\r\n    },\r\n\r\n    refreshToken: async (refreshToken: string): Promise<{ token: string; refreshToken?: string }> => {\r\n        const response = await apiService.post<{ token: string; refreshToken?: string }>(\r\n            '/auth/refreshToken',\r\n            { refreshToken }\r\n        )\r\n        return response.data as { token: string; refreshToken?: string }\r\n    },\r\n}"],"names":["authService","response","apiService","credentials","userData","refreshToken","useconfigStore","error","console"],"mappings":"gKAIO,IAAMA,EAAc,CAEvB,eAAgB,SAELC,AADU,OAAMC,EAAAA,CAAAA,CAAAA,IAAe,CAAO,iBAC7B,IAAI,CAGxB,MAAO,MAAOC,GAEHF,AADU,OAAMC,EAAAA,CAAAA,CAAAA,IAAe,CAAC,cAAeC,EAAW,EACjD,IAAI,CAGxB,SAAU,MAAOC,GACI,MAAMF,EAAAA,CAAAA,CAAAA,IAAe,CAAC,iBAAkBE,GAG7D,OAAQ,UACJ,IAAMC,EAAeC,EAAAA,CAAAA,CAAAA,QAAuB,GAAG,YAAY,CAC3D,GAAID,EACA,GAAI,CACA,MAAMH,EAAAA,CAAAA,CAAAA,IAAe,CAAC,eAAgB,CAAEG,aAAAA,CAAa,EACzD,CAAE,MAAOE,EAAO,CACZC,QAAQ,KAAK,CAAC,oBAAqBD,EACvC,CAGR,EAEA,aAAc,MAAOF,GAKVJ,AAJU,OAAMC,EAAAA,CAAAA,CAAAA,IAAe,CAClC,qBACA,CAAEG,aAAAA,CAAa,EAAC,EAEJ,IAAI,AAE5B,C"}