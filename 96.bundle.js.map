{"version":3,"file":"96.bundle.js","sources":["webpack://rspack-project/./src/utils/antd.ts","webpack://rspack-project/./src/views/auth/login.tsx"],"sourcesContent":["import type { MessageInstance } from 'antd/es/message/interface';\r\nimport type { ModalStaticFunctions } from 'antd/es/modal/confirm';\r\nimport type { NotificationInstance } from 'antd/es/notification/interface';\r\n\r\ntype ModalInstance = Omit<ModalStaticFunctions, 'warn'>;\r\n\r\n\r\nclass AntdUtils {\r\n  message!: MessageInstance;\r\n  notification!: NotificationInstance;\r\n  modal!: ModalInstance;\r\n\r\n  setMessageInstance(message: MessageInstance) {\r\n    this.message = message;\r\n    this.message.success\r\n  }\r\n\r\n  setNotificationInstance(notification: NotificationInstance) {\r\n    this.notification = notification;\r\n  }\r\n\r\n  setModalInstance(modal: ModalInstance) {\r\n    this.modal = modal;\r\n  }\r\n}\r\n\r\nexport const antdUtils = new AntdUtils();","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport type { LoginCredentials } from '@/hooks/use-auth/types';\r\nimport { Input } from 'antd';\r\nimport { authService } from '@/api/authAPI';\r\nimport { antdUtils } from '@/utils/antd';\r\nimport { useconfigStore } from '@/stores/config';\r\n\r\nconst Login = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [rememberMe, setRememberMe] = useState(false);\r\n    const navigate = useNavigate();\r\n    const {setToken,setRefreshToken} = useconfigStore()\r\n\r\n    const from = '/dashboard';\r\n\r\n    const handleSubmit = async (e: { preventDefault: () => void; }) => {\r\n        e.preventDefault();\r\n        const newUser: LoginCredentials = { username:username, password: password }\r\n        try {\r\n            const data = await authService.login(newUser);\r\n            setToken(data.token)\r\n            setRefreshToken(data.refreshToken)\r\n            navigate(from, { replace: true })\r\n        }\r\n        catch (error) {\r\n            antdUtils.message.error({ 'content': '' + error })\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"login\">\r\n            <div className='flex justify-center items-center h-[100vh]'>\r\n                <div className='flex justify-center'>\r\n                    <div className=\"dark:bg-[rgb(33,41,70)] w-[400px] px-[32px] py-[20px] mt-[-12%] bg-white rounded-lg\">\r\n                        <form className=\"space-y-6\" onSubmit={handleSubmit} method=\"POST\">\r\n                            <div className=\"mt-10 sm:mx-auto sm:w-full sm:max-w-sm\">\r\n                                <div className=\"mt-2\"><Input id=\"username\"\r\n                                    name=\"username\"\r\n                                    autoComplete=\"username\"\r\n                                    required\r\n                                    className=''\r\n                                    placeholder=\"用户名\" value={username}\r\n                                    onChange={(e) => setUsername(e.target.value)}\r\n                                    disabled={status === 'loading'} /></div>\r\n                                <div className=\"mt-2\">\r\n                                    <Input.Password\r\n                                        id=\"password\"\r\n                                        name=\"password\"\r\n                                        autoComplete=\"current-password\"\r\n                                        required\r\n                                        className=\"\"\r\n                                        placeholder=\"密码\"\r\n                                        value={password}\r\n                                        onChange={(e) => setPassword(e.target.value)}\r\n                                        disabled={status === 'loading'}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            {/* <div className=\"flex\">\r\n                                <input\r\n                                    id=\"remember-me\"\r\n                                    name=\"remember-me\"\r\n                                    type=\"checkbox\"\r\n                                    className=\"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                                    checked={rememberMe}\r\n                                    onChange={(e) => setRememberMe(e.target.checked)}\r\n                                />\r\n                                <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\r\n                                    记住我\r\n                                </label>\r\n                            </div> */}\r\n                            <div>\r\n                                <button type=\"submit\"\r\n                                    className=\"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 dark:bg-indigo-500 dark:shadow-none dark:hover:bg-indigo-400 dark:focus-visible:outline-indigo-500\"\r\n                                //disabled={status === 'loading'}\r\n                                >\r\n                                    {status === 'loading' ? (\r\n                                        <span className=\"flex items-center\">\r\n                                            登录中...\r\n                                        </span>\r\n                                    ) : (\r\n                                        '登录'\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;"],"names":["antdUtils","message","notification","modal","username","setUsername","useState","password","setPassword","rememberMe","setRememberMe","navigate","useNavigate","setToken","setRefreshToken","useconfigStore","handleSubmit","e","data","authService","error","Input","status"],"mappings":"kUA0BO,IAAMA,EAAY,IAnBzB,MAKE,mBAAmBC,CAAwB,CAAE,CAC3C,IAAI,CAAC,OAAO,CAAGA,EACf,IAAI,CAAC,OAAO,CAAC,OAAO,AACtB,CAEA,wBAAwBC,CAAkC,CAAE,CAC1D,IAAI,CAAC,YAAY,CAAGA,CACtB,CAEA,iBAAiBC,CAAoB,CAAE,CACrC,IAAI,CAAC,KAAK,CAAGA,CACf,C,cAfA,yBACA,8BACA,sB,CAcF,E,cCyEA,MAzFc,KACV,GAAM,CAACC,EAAUC,EAAY,CAAGC,AAAAA,GAAAA,EAAAA,QAAAA,AAAAA,EAAS,IACnC,CAACC,EAAUC,EAAY,CAAGF,AAAAA,GAAAA,EAAAA,QAAAA,AAAAA,EAAS,IACnC,CAACG,EAAYC,EAAc,CAAGJ,AAAAA,GAAAA,EAAAA,QAAAA,AAAAA,EAAS,IACvCK,EAAWC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,IACX,CAACC,SAAAA,CAAQ,CAACC,gBAAAA,CAAe,CAAC,CAAGC,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,IAI7BC,EAAe,MAAOC,IACxBA,EAAE,cAAc,GAEhB,GAAI,CACA,IAAMC,EAAO,MAAMC,EAAAA,CAAAA,CAAAA,KAAiB,CAFN,CAAE,SAASf,EAAU,SAAUG,CAAS,GAGtEM,EAASK,EAAK,KAAK,EACnBJ,EAAgBI,EAAK,YAAY,EACjCP,EATK,aASU,CAAE,QAAS,EAAK,EACnC,CACA,MAAOS,EAAO,CACVpB,EAAU,OAAO,CAAC,KAAK,CAAC,CAAE,QAAW,GAAKoB,CAAM,EACpD,CACJ,EAEA,MACI,UAAC,OAAI,UAAU,Q,SACX,UAAC,OAAI,UAAU,6C,SACX,UAAC,OAAI,UAAU,sB,SACX,UAAC,OAAI,UAAU,sF,SACX,WAAC,QAAK,UAAU,YAAY,SAAUJ,EAAc,OAAO,O,UACvD,WAAC,OAAI,UAAU,yC,UACX,UAAC,OAAI,UAAU,O,SAAO,UAACK,EAAAA,CAAKA,CAAAA,CAAC,GAAG,WAC5B,KAAK,WACL,aAAa,WACb,SAAQ,GACR,UAAU,GACV,YAAY,MAAM,MAAOjB,EACzB,SAAU,AAACa,GAAMZ,EAAYY,EAAE,MAAM,CAAC,KAAK,EAC3C,SAAUK,AAAW,YAAXA,M,KACd,UAAC,OAAI,UAAU,O,SACX,UAACD,EAAAA,CAAAA,CAAAA,QAAc,EACX,GAAG,WACH,KAAK,WACL,aAAa,mBACb,SAAQ,GACR,UAAU,GACV,YAAY,KACZ,MAAOd,EACP,SAAU,AAACU,GAAMT,EAAYS,EAAE,MAAM,CAAC,KAAK,EAC3C,SAAUK,AAAW,YAAXA,M,QAiBtB,UAAC,O,SACG,UAAC,UAAO,KAAK,SACT,UAAU,8T,SAGTA,AAAW,YAAXA,OACG,UAAC,QAAK,UAAU,oB,SAAoB,Q,GAIpC,I,eAYxC,C"}