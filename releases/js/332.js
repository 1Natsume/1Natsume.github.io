"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[332],{6332:(i,t,s)=>{s.r(t),s.d(t,{default:()=>ei});var n=s(641),e={id:"blog_head_bar",ref:"blogHeadBar"},a={class:"float-right-wrap"};var l={id:"brand_name"},o={class:"max-screen"},r={class:"max-screen-wrap"};const c={name:"BrandName",data:function(){return{blogName:""}},created:function(){},mounted:function(){$(".blog-name").append(this.$store.state.config.logo)},methods:{switchPanelAside:function(){this.$bus.emit("switchPanelAside")}}};var u=s(6262);const d=(0,u.A)(c,[["render",function(i,t,s,e,a,c){var u=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",o,[(0,n.Lk)("div",r,[(0,n.bF)(u,{class:"blog-name head-brand-color",to:"/",tag:"span"})])]),(0,n.Lk)("div",{class:"min-screen",onClick:t[0]||(t[0]=function(i){return c.switchPanelAside()})},t[1]||(t[1]=[(0,n.Lk)("div",{class:"min-screen-wrap"},[(0,n.Lk)("span",{class:"icon iconfont menu"})],-1)]))])}]]);var p=s(3751),h={id:"keyword_searcher"},m={class:"keyword-searcher-wrap"};var y=s(33),f={id:"pop_list"},k={class:"pop-list-wrap small-base-scroll"},g=["onClick"],v={key:0,class:"left-flag"},w={key:1,class:"item-key sing-ellipsis item-key2"};const b={name:"PopList",methods:{setFlag:function(i){this.flagIndex=i},clickItem:function(i,t){null!=i&&null!=t&&(this.$emit("clickItem",i.value),this.setFlag(t))}},data:function(){return{flagIndex:-1}},props:{flag:{type:Boolean},popTitle:{type:String,default:function(){return""}},popList:{type:Array,default:function(){return[{}]}}}},L=(0,u.A)(b,[["render",function(i,t,s,e,a,l){return(0,n.uX)(),(0,n.CE)("div",f,[(0,n.Lk)("div",k,[(0,n.bo)((0,n.Lk)("div",{class:"pop-list-head pop-list-item"},(0,y.v_)(s.popTitle),513),[[p.aG,s.popTitle]]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.popList,(function(t,e){return(0,n.uX)(),(0,n.CE)("div",{class:"pop-list-item",onClick:function(i){return l.clickItem(t,e)}},[s.flag&&i.flagIndex==e?((0,n.uX)(),(0,n.CE)("div",v)):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,y.C4)(["item-key sing-ellipsis",t.key2?"item-key1":""])},(0,y.v_)(t.key),3),t.key2?((0,n.uX)(),(0,n.CE)("div",w,(0,y.v_)(t.key2),1)):(0,n.Q3)("",!0)],8,g)})),256))])])}]]);var P=s(664),S=s(950);const C={name:"KeywordSearcher",components:{PopList:L},data:function(){return{isShow:!1,keyword:"",list:[]}},mounted:function(){var i=this;S.A.registerUnClick("#keyword_searcher",(function(){i.isShow=!1}))},methods:{search:function(){this.list=P.A.loadkeywordList(this.keyword).list,this.isShow=!0}}},x=(0,u.A)(C,[["render",function(i,t,s,e,a,l){var o=(0,n.g2)("pop-list");return(0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("div",m,[(0,n.bo)((0,n.Lk)("input",{class:"input-wrap",placeholder:"输入关键字查询","onUpdate:modelValue":t[0]||(t[0]=function(t){return i.keyword=t}),onFocus:t[1]||(t[1]=function(i){return l.search()})},null,544),[[p.Jo,i.keyword]]),(0,n.Lk)("div",{class:"search-btn head-keyword-back-color",onClick:t[2]||(t[2]=function(i){return l.search()})},t[3]||(t[3]=[(0,n.Lk)("span",{class:"icon iconfont -search"},null,-1)]))]),t[4]||(t[4]=(0,n.Lk)("div",{class:"keyword-searcher-shade"},null,-1)),(0,n.bF)(p.eB,{name:"trans"},{default:(0,n.k6)((function(){return[(0,n.bo)((0,n.bF)(o,{class:"pop-list","pop-list":i.list},null,8,["pop-list"]),[[p.aG,i.isShow]])]})),_:1})])}]]);var T={id:"music_player"},A={class:"music-player-out-wrap"},_={class:"music-player-wrap"},F={class:"music-right-wrap"},B={class:"music-ope-wrap"},E=["title"],I={class:"music-ope-bar"};var M,W,X,U=s(4692),V=s.n(U);function q(i){var t=i.split(":");return 60*t[0]+ +t[1]}var z={rondom:function(i,t){!function(i){if(!M){var t=(M=new AudioContext).createMediaElementSource(i);W=M.createAnalyser(),t.connect(W),W.connect(M.destination),W.fftSize=2048;var s=W.frequencyBinCount;X=new Uint8Array(s)}!function i(){if(requestAnimationFrame(i),M){W.getByteFrequencyData(X);for(var t=0;t<s;t++){X[t];var n=X[16*t],e=255-Math.random()*n,a=Math.random()*n,l="rgb(".concat(e,", ").concat(a,", ").concat(120,")");V()(".panel-small").css("background-color",l)}}}()}(i)},loadLrl:function(i){for(var t=i.split("\n"),s=[],n=0;n<t.length;n++){var e=t[n].split("]"),a={time:q(e[0].substring(1)),word:e[1]};s.push(a)}return s},setText:function(i,t){if(0!=i.length&&null!=i)(function(i,t){for(var s=t.currentTime,n=0;n<i.length;n++)if(i[n].time>s)return i[n-1].word})(i,t)}};const G=z,H={name:"MusicPlayer",components:{PopList:L},created:function(){var i=this;this.audio.ontimeupdate=this.musicUpdate,this.audio.onerror=this.musicError,this.audio.oncanplay=this.musicCanplay,this.audio.onended=this.musicEnded,P.A.loadMusicList(this.$store.state.config.musicIds).then((function(t){i.playList=t})),S.A.registerUnClick("#music_player",(function(){i.showPlay=!1}))},data:function(){return{delayTime:0,audio:new Audio,isPlay:!1,playing:{index:0,title:"音乐播放器",name:"",url:"",pic:""},playList:[],showPlay:!1,lrc:[],cssStyle:{maxTitleWidth:130,titleWidth:130,barMaxWidth:140,barWidth:0,fontSize:"9"}}},computed:{getPicImgStyle:function(){return{background:"url('"+(this.playing.pic?this.playing.pic:"")+"') 0% 0% / 100% no-repeat"}},musicList:function(){return this.playList.map((function(i,t){return{key:i.title,key2:i.author,value:i,index:t}}))}},methods:{musicEnded:function(i){S.A.showInfoMsg("播放结束,自动切换下一首"),this.musicPlayPos()},musicUpdate:function(i){this.cssStyle.barWidth=(this.audio.currentTime/this.audio.duration*this.cssStyle.barMaxWidth).toFixed(0),this.audio.currentTime/this.audio.duration>0&&G.setText(this.lrc,this.audio)},musicError:function(i){var t=this;S.A.showInfoMsg("播放失败,5秒后自动切换下一首"),this.delayTime=setTimeout((function(){t.musicPlayPos()}),5e3)},musicCanplay:function(i){},musicState:function(){this.playing.url?(this.isPlay=!this.isPlay,this.isPlay?(this.audio.crossOrigin="anonymous",G.rondom(this.audio),this.audio.play()):this.audio.pause()):this.musicPlayPos()},musicPlayPre:function(){0==this.playing.index?this.musicPlay(this.playList[this.playList.length-1]):this.musicPlay(this.playList[this.playing.index-1])},musicPlayPos:function(){this.playing.index==this.playList.length-1?this.musicPlay(this.playList[0]):this.musicPlay(this.playList[this.playing.index+1])},musicSetInfo:function(i){var t=this;this.playing.url=i.url,this.playing.index=i.index,this.playing.pic=i.pic,this.playing.title=i.title+"["+i.author+"]";var s=S.A.getTextWidth(this.playing.name,this.cssStyle.fontSize);s>this.cssStyle.maxTitleWidth?this.cssStyle.titleWidth=s:this.cssStyle.titleWidth=this.cssStyle.maxTitleWidth,this.$refs.popList.setFlag(i.index),P.A.loadMusicSonglrc(i.lrc).then((function(i){t.lrc=G.loadLrl(i)}))},musicPlay:function(i){try{this.audio.crossOrigin="anonymous",this.audio.src=i.url,G.rondom(this.audio),this.audio.play(),this.musicSetInfo(i),this.isPlay=!0,this.delayTime>0&&(clearTimeout(this.delayTime),this.delayTime=0)}catch(i){this.musicError()}},clickItem:function(i){this.musicPlay(i)}}},N=(0,u.A)(H,[["render",function(i,t,s,e,a,l){var o=(0,n.g2)("pop-list");return(0,n.uX)(),(0,n.CE)("div",T,[(0,n.Lk)("div",A,[(0,n.Lk)("div",_,[(0,n.Lk)("div",{class:(0,y.C4)(["music-img-wrap",{Rotation:i.isPlay}])},[(0,n.Lk)("div",{class:"div-img head-music-pic",style:(0,y.Tr)(l.getPicImgStyle)},null,4)],2),(0,n.Lk)("div",F,[(0,n.Lk)("div",B,[(0,n.Lk)("div",{class:"music-title",style:(0,y.Tr)({width:i.cssStyle.titleWidth+"px"}),title:i.playing.title},[(0,n.Lk)("div",{class:(0,y.C4)(["music-display-info sing-ellipsis",{marquee:i.isPlay}]),style:(0,y.Tr)({width:i.cssStyle.titleWidth-5+"px"})},(0,y.v_)(i.playing.title),7),(0,n.bo)((0,n.Lk)("div",{class:(0,y.C4)(["music-display-info sing-ellipsis",{marqueeT:i.isPlay}]),style:(0,y.Tr)({width:i.cssStyle.titleWidth-5+"px"})},(0,y.v_)(i.playing.title),7),[[p.aG,i.isPlay]])],12,E),(0,n.Lk)("div",I,[(0,n.Lk)("span",{class:"pre",onClick:t[0]||(t[0]=function(){return l.musicPlayPre&&l.musicPlayPre.apply(l,arguments)})},t[4]||(t[4]=[(0,n.Lk)("span",{class:"icon iconfont angle-double-left"},null,-1)])),(0,n.Lk)("span",{class:"play",onClick:t[1]||(t[1]=function(){return l.musicState&&l.musicState.apply(l,arguments)})},[(0,n.Lk)("span",{class:(0,y.C4)(["icon iconfont",{timeout:!i.isPlay,play1:i.isPlay}])},null,2)]),(0,n.Lk)("span",{class:"pos",onClick:t[2]||(t[2]=function(){return l.musicPlayPos&&l.musicPlayPos.apply(l,arguments)})},t[5]||(t[5]=[(0,n.Lk)("span",{class:"icon iconfont angle-double-right"},null,-1)]))])]),t[6]||(t[6]=(0,n.Lk)("div",{class:"music-volume-wrap"},[(0,n.Lk)("span",{class:"icon iconfont volume-"})],-1)),(0,n.Lk)("div",{class:"music-progress",style:(0,y.Tr)({width:i.cssStyle.barWidth+"px"})},null,4)]),(0,n.Lk)("div",{class:"music-list-wrap",onClick:t[3]||(t[3]=function(t){return i.showPlay=!i.showPlay})},t[7]||(t[7]=[(0,n.Lk)("span",{class:"icon iconfont headphones"},null,-1)]))]),t[8]||(t[8]=(0,n.Lk)("div",{class:"music-player-shade"},null,-1)),(0,n.bF)(p.eB,{name:"trans"},{default:(0,n.k6)((function(){return[(0,n.bo)((0,n.bF)(o,{class:"pop-list",ref:"popList","pop-list":l.musicList,"pop-title":"音乐列表",flag:!0,onClickItem:l.clickItem},null,8,["pop-list","onClickItem"]),[[p.aG,i.showPlay]])]})),_:1})])])}]]);var K={id:"beer_list"},O={class:"beer-list-wrap"};const Q={data:function(){return{showPop:!1,beerList:[]}},name:"BeerList",components:{PopList:L},mounted:function(){var i=this;S.A.registerUnClick("#beer_list",(function(){i.showPop=!1}))}},D=(0,u.A)(Q,[["render",function(i,t,s,e,a,l){var o=(0,n.g2)("pop-list");return(0,n.uX)(),(0,n.CE)("div",K,[(0,n.Lk)("div",O,[(0,n.Lk)("div",{class:"beer-wrap",onClick:t[0]||(t[0]=function(t){return i.showPop=!i.showPop})},t[1]||(t[1]=[(0,n.Lk)("div",{class:"beer-inner-wrap"},[(0,n.Lk)("span",{class:"icon iconfont bell"})],-1)])),(0,n.bF)(p.eB,{name:"trans"},{default:(0,n.k6)((function(){return[(0,n.bo)((0,n.bF)(o,{"pop-list":i.beerList,class:"pop-list","pop-title":"闲言碎语"},null,8,["pop-list"]),[[p.aG,i.showPop]])]})),_:1})])])}]]);var J={id:"set_btn"},R={class:"set-btn-out-wrap"};s(7118);const j={name:"SetBtn",methods:{openManagerView:function(){}}},Y=(0,u.A)(j,[["render",function(i,t,s,e,a,l){return(0,n.uX)(),(0,n.CE)("div",J,[(0,n.Lk)("div",R,[(0,n.Lk)("div",{class:"set-btn-wrap",onClick:t[0]||(t[0]=function(){return l.openManagerView&&l.openManagerView.apply(l,arguments)})},t[1]||(t[1]=[(0,n.Lk)("span",null,"设置",-1),(0,n.Lk)("span",{class:"icon iconfont angeldown1"},null,-1)]))])])}]]);const Z={name:"MinSetBtn"},ii=(0,u.A)(Z,[["render",function(i,t,s,e,a,l){return(0,n.uX)(),(0,n.CE)("div",{id:"min_set_btn",onClick:t[0]||(t[0]=function(t){return i.$emit("clickSet")})},t[1]||(t[1]=[(0,n.Lk)("div",null,[(0,n.Lk)("span",{class:"icon iconfont shezhi"})],-1)]))}]]);var ti={id:"brand_title",class:"head-back-color"};const si={name:"BrandTitle",data:function(){return{blogName:""}},mounted:function(){$(".brand-title-wrap").append(this.$store.state.config.logo)}},ni={name:"BlogHeadBar",data:function(){return{}},mounted:function(){var i=this;function t(){$(i.$refs.blogHeadBar).css("overflow",$(window).width()<900?"hidden":""),i.minShowSet=!1}t(),$(window).resize((function(i){t()})),this.$refs.blogHeadBar.addEventListener("transitionstart",(function(i){$(i.target).css("overflow","hidden")})),this.$refs.blogHeadBar.addEventListener("transitionend",(function(i){"250"==$(i.target).height()&&$(i.target).css("overflow","")}))},computed:{},components:{BrandTitle:(0,u.A)(si,[["render",function(i,t,s,e,a,l){var o=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",ti,[(0,n.bF)(o,{to:"/",class:"brand-title-wrap",tag:"div"})])}]]),MinSetBtn:ii,SetBtn:Y,BeerList:D,MusicPlayer:N,KeywordSearcher:x,BrandName:d},methods:{switchSetView:function(){var i=this;setTimeout((function(){i.minShowSet=!i.minShowSet}),this.minShowSet&&$("#blog_head_bar .pop-list").is(":visible")?300:0)}}},ei=(0,u.A)(ni,[["render",function(i,t,s,l,o,r){var c=(0,n.g2)("brand-title"),u=(0,n.g2)("brand-name"),d=(0,n.g2)("min-set-btn"),p=(0,n.g2)("keyword-searcher"),h=(0,n.g2)("music-player"),m=(0,n.g2)("beer-list"),y=(0,n.g2)("set-btn");return(0,n.uX)(),(0,n.CE)("div",e,[(0,n.bF)(c,{class:"brand-title"}),(0,n.bF)(u),(0,n.bF)(d,{class:"min-set-btn",onClickSet:r.switchSetView},null,8,["onClickSet"]),(0,n.bF)(p,{class:"keyword-searcher"}),(0,n.Lk)("div",a,[(0,n.bF)(h,{class:"music-player"}),(0,n.bF)(m,{class:"beer-list"}),(0,n.bF)(y,{class:"set-btn"})])],512)}]])}}]);
//# sourceMappingURL=332.js.map