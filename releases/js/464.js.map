{"version":3,"file":"js/464.js","mappings":"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","sources":["webpack://blog/./src/components/head/MusicPlayer.vue","webpack://blog/./src/components/head/MusicPlayer.vue?bd22"],"sourcesContent":["<template>\r\n  <div id=\"music_player\">\r\n    <div class=\"music-player-out-wrap\">\r\n      <div class=\"music-player-wrap\">\r\n        <div class=\"music-img-wrap\" :class=\"{ Rotation: audio.isPlay }\">\r\n          <div class=\"div-img head-music-pic\" :style=\"getPicImgStyle()\"></div>\r\n        </div>\r\n        <div class=\"music-right-wrap\">\r\n          <div class=\"music-ope-wrap\">\r\n            <div class=\"music-title\" :style=\"{ width: audio.cssStyle.titleWidth + 'px' }\" :title=\"audio.playing.title\">\r\n              <div class=\"music-display-info sing-ellipsis\" :class=\"{ marquee: audio.isPlay }\"\r\n                :style=\"{ width: (audio.cssStyle.titleWidth - 5) + 'px' }\">{{ audio.playing.title }}\r\n              </div>\r\n              <div class=\"music-display-info sing-ellipsis\" :class=\"{ marqueeT: audio.isPlay }\"\r\n                :style=\"{ width: (audio.cssStyle.titleWidth - 5) + 'px' }\" v-show=\"audio.isPlay\">{{ audio.playing.title\r\n                }}\r\n              </div>\r\n            </div>\r\n            <div class=\"music-ope-bar\">\r\n              <span class=\"pre\" @click=\"musicPlayPre\"><span class=\"icon iconfont angle-double-left\"></span></span>\r\n              <span class=\"play\" @click=\"musicState\"><span class=\"icon iconfont \"\r\n                  :class=\"{ timeout: !audio.isPlay, play1: audio.isPlay }\"></span></span>\r\n              <span class=\"pos\" @click=\"musicPlayPos\"><span class=\"icon iconfont angle-double-right\"></span></span>\r\n            </div>\r\n          </div>\r\n          <div class=\"music-volume-wrap\">\r\n            <span class=\"icon iconfont volume-\"></span>\r\n          </div>\r\n          <div class=\"music-progress\" :style=\"{ width: audio.cssStyle.barWidth + 'px' }\"></div>\r\n        </div>\r\n        <div class=\"music-list-wrap\" @click=\"audio.showPlay = !audio.showPlay\">\r\n          <span class=\"icon iconfont headphones\"></span>\r\n        </div>\r\n      </div>\r\n      <div class=\"music-player-shade\"></div>\r\n      <transition name=\"trans\">\r\n        <pop-list class=\"pop-list\" ref=\"popList\" v-show=\"audio.showPlay\" :pop-list=\"musicList\" pop-title=\"音乐列表\"\r\n          :flag=\"true\" @clickItem=\"clickItem\"></pop-list>\r\n      </transition>\r\n    </div>\r\n    <div id=\"music_player_lrc\"></div>\r\n    <!-- <canvas id=\"canvas\"></canvas> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Component from \"@/utils/Component\";\r\nimport blogUtils from \"@/utils/BlogUtils\";\r\nimport blogApi from \"@/utils/BlogApi\";\r\nimport audio from '@/utils/Audio'\r\nimport BlogContext from \"@/context/BlogContext\";\r\n\r\nexport default {\r\n  name: \"MusicPlayer\",\r\n  components: { PopList: Component.PopList },\r\n  created() {\r\n    audio.audio.ontimeupdate = this.musicUpdate;\r\n    audio.audio.onerror = this.musicError;\r\n    audio.audio.oncanplay = this.musicCanplay;\r\n    audio.audio.onended = this.musicEnded;\r\n    blogApi.loadMusicList(BlogContext.musicIds).then((list) => {\r\n      audio.playList = list;\r\n      //this.musicState();\r\n    });\r\n    blogUtils.registerUnClick(\"#music_player\", () => {\r\n      audio.showPlay = false;\r\n    });\r\n  },\r\n  data: () => {\r\n    return {\r\n      audio: audio\r\n    }\r\n  },\r\n  computed: {\r\n    \r\n  },\r\n  methods: {\r\n    musicList: function () {\r\n      return this.audio.playList.map((item, i) => {\r\n        return {\r\n          key: item.title,\r\n          key2: item.author,\r\n          value: item,\r\n          index: i\r\n        };\r\n      });\r\n    },\r\n    musicEnded: function (even) {\r\n      blogUtils.showInfoMsg('播放结束,自动切换下一首');\r\n      this.musicPlayPos();\r\n    },\r\n    musicUpdate: function (even) {\r\n      this.audio.cssStyle.barWidth = ((audio.audio.currentTime / audio.audio.duration) * audio.cssStyle.barMaxWidth).toFixed(0);\r\n      // if (audio.audio.currentTime / audio.audio.duration > 0) {\r\n      //   document.getElementById(\"music_player_lrc\").textContent = audio.getIndex(audio.lrc, audio.audio);\r\n      //   audio.setText(audio.lrc, audio.audio)\r\n      // }\r\n    },\r\n    musicError: function (even) {\r\n      blogUtils.showInfoMsg('播放失败,5秒后自动切换下一首');\r\n      audio.delayTime = setTimeout(() => {\r\n        this.musicPlayPos();\r\n      }, 5000);\r\n    },\r\n    musicCanplay: function (even) {\r\n    },\r\n    getPicImgStyle: function () {\r\n      let src = this.audio.playing.pic ? this.audio.playing.pic : '';\r\n      return {\r\n        \"background\": \"url('\" + src + \"') 0% 0% / 100% no-repeat\",\r\n      }\r\n    },\r\n    musicState() {\r\n      audio.musicState()\r\n      this.playing = audio.playing\r\n    },\r\n    musicPlayPre() {\r\n      audio.musicPlayPre()\r\n      this.playing = audio.playing\r\n    },\r\n    musicPlayPos() {\r\n      audio.musicPlayPos()\r\n      this.playing = audio.playing\r\n    },\r\n    clickItem: function (item) {\r\n      audio.musicPlay(item);\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./MusicPlayer.vue?vue&type=template&id=8e4f3a16\"\nimport script from \"./MusicPlayer.vue?vue&type=script&lang=js\"\nexport * from \"./MusicPlayer.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["id","class","name","components","PopList","Component","created","audio","ontimeupdate","this","musicUpdate","onerror","musicError","oncanplay","musicCanplay","onended","musicEnded","blogApi","loadMusicList","BlogContext","musicIds","then","list","playList","blogUtils","registerUnClick","showPlay","data","computed","methods","musicList","map","item","i","key","title","key2","author","value","index","even","showInfoMsg","musicPlayPos","cssStyle","barWidth","currentTime","duration","barMaxWidth","toFixed","_this","delayTime","setTimeout","getPicImgStyle","playing","pic","musicState","musicPlayPre","clickItem","musicPlay","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_normalizeClass","Rotation","_ctx","isPlay","style","_normalizeStyle","$options","_hoisted_4","_hoisted_5","width","titleWidth","marquee","marqueeT","_hoisted_6","_hoisted_7","onClick","_cache","apply","arguments","timeout","play1","$event","_createVNode","_Transition","_withCtx","_component_pop_list","ref","flag","onClickItem","_"],"sourceRoot":""}