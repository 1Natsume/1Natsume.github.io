{"version":3,"file":"js/941.js","mappings":"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","sources":["webpack://blog/./src/components/head/MusicPlayer.vue","webpack://blog/./src/utils/Audio.js","webpack://blog/./src/components/head/MusicPlayer.vue?bd22"],"sourcesContent":["<template>\r\n  <div id=\"music_player\">\r\n    <div class=\"music-player-out-wrap\">\r\n      <div class=\"music-player-wrap\">\r\n        <div class=\"music-img-wrap\" :class=\"{ Rotation: isPlay }\">\r\n          <div class=\"div-img head-music-pic\" :style=\"getPicImgStyle\"></div>\r\n        </div>\r\n        <div class=\"music-right-wrap\">\r\n          <div class=\"music-ope-wrap\">\r\n            <div class=\"music-title\" :style=\"{ width: cssStyle.titleWidth + 'px' }\" :title=\"playing.title\">\r\n              <div class=\"music-display-info sing-ellipsis\" :class=\"{ marquee: isPlay }\"\r\n                :style=\"{ width: (cssStyle.titleWidth - 5) + 'px' }\">{{ playing.title }}\r\n              </div>\r\n              <div class=\"music-display-info sing-ellipsis\" :class=\"{ marqueeT: isPlay }\"\r\n                :style=\"{ width: (cssStyle.titleWidth - 5) + 'px' }\" v-show=\"isPlay\">{{ playing.title }}\r\n              </div>\r\n            </div>\r\n            <div class=\"music-ope-bar\">\r\n              <span class=\"pre\" @click=\"musicPlayPre\"><span class=\"icon iconfont angle-double-left\"></span></span>\r\n              <span class=\"play\" @click=\"musicState\"><span class=\"icon iconfont \"\r\n                  :class=\"{ timeout: !isPlay, play1: isPlay }\"></span></span>\r\n              <span class=\"pos\" @click=\"musicPlayPos\"><span class=\"icon iconfont angle-double-right\"></span></span>\r\n            </div>\r\n          </div>\r\n          <div class=\"music-volume-wrap\">\r\n            <span class=\"icon iconfont volume-\"></span>\r\n          </div>\r\n          <div class=\"music-progress\" :style=\"{ width: cssStyle.barWidth + 'px' }\"></div>\r\n        </div>\r\n        <div class=\"music-list-wrap\" @click=\"showPlay = !showPlay\">\r\n          <span class=\"icon iconfont headphones\"></span>\r\n        </div>\r\n      </div>\r\n      <div class=\"music-player-shade\"></div>\r\n      <transition name=\"trans\">\r\n        <pop-list class=\"pop-list\" ref=\"popList\" v-show=\"showPlay\" :pop-list=\"musicList\" pop-title=\"音乐列表\" :flag=\"true\"\r\n          @clickItem=\"clickItem\"></pop-list>\r\n      </transition>\r\n    </div>\r\n    <div id=\"music_player_lrc\"></div>\r\n    <!-- <canvas id=\"canvas\"></canvas> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Component from \"@/utils/Component\";\r\nimport blogUtils from \"@/utils/BlogUtils\";\r\nimport blogApi from \"@/utils/BlogApi\";\r\nimport audio from '@/utils/Audio'\r\nimport BlogContext from \"@/context/BlogContext\";\r\n\r\nexport default {\r\n  name: \"MusicPlayer\",\r\n  components: { PopList: Component.PopList },\r\n  created: function () {\r\n    this.audio.ontimeupdate = this.musicUpdate;\r\n    this.audio.onerror = this.musicError;\r\n    this.audio.oncanplay = this.musicCanplay;\r\n    this.audio.onended = this.musicEnded;\r\n    blogApi.loadMusicList(BlogContext.musicIds).then((list) => {\r\n      this.playList = list;\r\n      //this.musicState();\r\n    });\r\n    blogUtils.registerUnClick(\"#music_player\", () => {\r\n      this.showPlay = false;\r\n    });\r\n\r\n  },\r\n  data: () => {\r\n    return {\r\n      delayTime: 0,\r\n      audio: new Audio(),\r\n      isPlay: false,\r\n      playing: {\r\n        index: 0,\r\n        title: '音乐播放器',\r\n        name: '',\r\n        url: '',\r\n        pic: '',\r\n      },\r\n      playList: [],\r\n      showPlay: false,\r\n      lrc: [],\r\n      cssStyle: {\r\n        maxTitleWidth: 130,\r\n        titleWidth: 130,\r\n        barMaxWidth: 140,\r\n        barWidth: 0,\r\n        fontSize: '9',\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    getPicImgStyle: function () {\r\n      let src = this.playing.pic ? this.playing.pic : '';\r\n      return {\r\n        \"background\": \"url('\" + src + \"') 0% 0% / 100% no-repeat\",\r\n      }\r\n    },\r\n    musicList: function () {\r\n      return this.playList.map((item, i) => {\r\n        return {\r\n          key: item.title,\r\n          key2: item.author,\r\n          value: item,\r\n          index: i\r\n        };\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    musicEnded: function (even) {\r\n      blogUtils.showInfoMsg('播放结束,自动切换下一首');\r\n      this.musicPlayPos();\r\n    },\r\n    musicUpdate: function (even) {\r\n      this.cssStyle.barWidth = ((this.audio.currentTime / this.audio.duration) * this.cssStyle.barMaxWidth).toFixed(0);\r\n      if (this.audio.currentTime / this.audio.duration > 0) {\r\n        document.getElementById(\"music_player_lrc\").textContent = audio.getIndex(this.lrc, this.audio);\r\n        audio.setText(this.lrc, this.audio)\r\n      }\r\n\r\n\r\n    },\r\n    musicError: function (even) {\r\n      blogUtils.showInfoMsg('播放失败,5秒后自动切换下一首');\r\n      this.delayTime = setTimeout(() => {\r\n        this.musicPlayPos();\r\n      }, 5000);\r\n    },\r\n    musicCanplay: function (even) {\r\n    },\r\n    /*切換播放暫停狀態*/\r\n    musicState: function () {\r\n      if (this.playing.url) {\r\n        this.isPlay = !this.isPlay;\r\n        if (this.isPlay) {\r\n          this.audio.crossOrigin = 'anonymous';\r\n          audio.rondom(this.audio)\r\n          this.audio.play();\r\n        } else {\r\n          this.audio.pause();\r\n        }\r\n      } else {\r\n        this.musicPlayPos();\r\n      }\r\n    },\r\n    musicPlayPre: function () {\r\n      if (this.playing.index == 0) {\r\n        this.musicPlay(this.playList[this.playList.length - 1]);\r\n      } else {\r\n        this.musicPlay(this.playList[this.playing.index - 1]);\r\n      }\r\n    },\r\n    musicPlayPos: function () {\r\n      if (this.playing.index == this.playList.length - 1) {\r\n        this.musicPlay(this.playList[0]);\r\n      } else {\r\n        this.musicPlay(this.playList[this.playing.index + 1]);\r\n      }\r\n\r\n    },\r\n    musicSetInfo: function (item) {\r\n      this.playing.url = item.url;\r\n      this.playing.index = item.index;\r\n      this.playing.pic = item.pic;\r\n      this.playing.title = item.title + \"[\" + item.author + \"]\";\r\n      let calTitleWidth = blogUtils.getTextWidth(this.playing.name, this.cssStyle.fontSize);\r\n      calTitleWidth > this.cssStyle.maxTitleWidth ? this.cssStyle.titleWidth = calTitleWidth : this.cssStyle.titleWidth = this.cssStyle.maxTitleWidth;\r\n      this.$refs.popList.setFlag(item.index);\r\n      blogApi.loadMusicSonglrc(item.lrc).then(res => {\r\n        this.lrc = audio.loadLrl(res)\r\n      })\r\n\r\n    },\r\n    musicPlay: function (item) {\r\n      try {\r\n        this.audio.crossOrigin = 'anonymous';\r\n        this.audio.src = item.url;\r\n        audio.rondom(this.audio)\r\n        this.audio.play();\r\n        this.musicSetInfo(item);\r\n        this.isPlay = true;\r\n        if (this.delayTime > 0) {\r\n          clearTimeout(this.delayTime);\r\n          this.delayTime = 0;\r\n        }\r\n      } catch (e) {\r\n        this.musicError();\r\n      }\r\n\r\n    },\r\n    clickItem: function (item) {\r\n      this.musicPlay(item);\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import $ from \"jquery\";\r\nimport text from '@/utils/canvasText'\r\n\r\nlet AudCtx, analyser, dataArray, bufferLength = 0;\r\nfunction visualize(audio) {\r\n\r\n  if (!AudCtx) {\r\n    AudCtx = new AudioContext();//音频内容\r\n    var src = AudCtx.createMediaElementSource(audio);\r\n    analyser = AudCtx.createAnalyser();\r\n\r\n    src.connect(analyser);\r\n    analyser.connect(AudCtx.destination);\r\n    analyser.fftSize = 2048;//快速傅里叶变换, 必须为2的N次方\r\n\r\n    var bufferLength = analyser.frequencyBinCount;// = fftSize * 0.5\r\n\r\n    //part4: 变量\r\n\r\n    dataArray = new Uint8Array(bufferLength);//8位无符号定长数组\r\n  }\r\n  //part5: 动态监听\r\n  function renderFrame() {\r\n    requestAnimationFrame(renderFrame);//方法renderFrame托管到定时器，无限循环调度，频率<16.6ms/次\r\n\r\n    if (AudCtx) {\r\n      analyser.getByteFrequencyData(dataArray);//获取当前时刻的音频数据\r\n      //part6: 绘画声压条\r\n      for (var i = 0; i < bufferLength; i++) {\r\n\r\n        var data = dataArray[i];//int,0~255\r\n\r\n        let barHeight = dataArray[i * 16];\r\n        const [r, g, b] = [255 - Math.random() * barHeight, Math.random() * barHeight, 120]\r\n\r\n        let color = `rgb(${r}, ${g}, ${b})`\r\n\r\n        // const frequency = data; // 选择频率数据中的一个值\r\n        // const color = `rgb(255, ${frequency}, ${frequency})`; // 简单起见，我们用红色通道表示频率\r\n\r\n        $('.panel-small').css('background-color', color);\r\n\r\n      }\r\n    }\r\n  }\r\n  renderFrame();\r\n\r\n}\r\n\r\n\r\nfunction parseTime(lrcTime) {\r\n  let lrcTimeArr = lrcTime.split(\":\");\r\n  return lrcTimeArr[0] * 60 + +lrcTimeArr[1];\r\n}\r\n // 获取当前播放到的歌词的下标\r\nfunction getIndex(result, audio) {\r\n  let Time = audio.currentTime;\r\n  for (let i = 0; i < result.length; i++) {\r\n    if (result[i].time > Time) {\r\n      return result[i - 1].word;\r\n    }\r\n  }\r\n\r\n}\r\nlet audio = {\r\n\r\n  rondom: function (dom, list) {\r\n\r\n\r\n    visualize(dom);\r\n\r\n  },\r\n  loadLrl: function (lrc) {\r\n    // 最开始获取到的歌词列表是字符串类型（不好操作）\r\n    let lrcArr = lrc.split('\\n');\r\n    // 接收修正后的歌词数组\r\n    let result = [];\r\n    // 将歌词数组转成由对象组成的数组，对象有time和word两个属性（为了方便操作）\r\n    for (let i = 0; i < lrcArr.length; i++) {\r\n      var lrcData = lrcArr[i].split(']');\r\n      var lrcTime = lrcData[0].substring(1);\r\n      var obj = {\r\n        time: parseTime(lrcTime),\r\n        word: lrcData[1]\r\n      }\r\n      result.push(obj);\r\n    }\r\n    return result\r\n  },\r\n  setText(result, audio){\r\n    if(result.length==0||result==undefined){\r\n      return\r\n    }\r\n    let word = getIndex(result, audio);\r\n    //text([word])\r\n  }\r\n}\r\nexport default audio;","import { render } from \"./MusicPlayer.vue?vue&type=template&id=5a5c52bd\"\nimport script from \"./MusicPlayer.vue?vue&type=script&lang=js\"\nexport * from \"./MusicPlayer.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["id","class","AudCtx","analyser","dataArray","parseTime","lrcTime","lrcTimeArr","split","audio","rondom","dom","list","src","AudioContext","createMediaElementSource","createAnalyser","connect","destination","fftSize","bufferLength","frequencyBinCount","Uint8Array","renderFrame","requestAnimationFrame","getByteFrequencyData","i","barHeight","r","Math","random","g","color","concat","$","css","visualize","loadLrl","lrc","lrcArr","result","length","lrcData","obj","time","substring","word","push","setText","undefined","Time","currentTime","getIndex","name","components","PopList","Component","created","_this","this","ontimeupdate","musicUpdate","onerror","musicError","oncanplay","musicCanplay","onended","musicEnded","blogApi","loadMusicList","BlogContext","musicIds","then","playList","blogUtils","registerUnClick","showPlay","data","delayTime","Audio","isPlay","playing","index","title","url","pic","cssStyle","maxTitleWidth","titleWidth","barMaxWidth","barWidth","fontSize","computed","getPicImgStyle","musicList","map","item","key","key2","author","value","methods","even","showInfoMsg","musicPlayPos","duration","toFixed","document","getElementById","textContent","_this2","setTimeout","musicState","crossOrigin","play","pause","musicPlayPre","musicPlay","musicSetInfo","_this3","calTitleWidth","getTextWidth","$refs","popList","setFlag","loadMusicSonglrc","res","clearTimeout","e","clickItem","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_normalizeClass","Rotation","_ctx","style","_normalizeStyle","$options","_hoisted_4","_hoisted_5","width","marquee","marqueeT","_hoisted_6","_hoisted_7","onClick","_cache","apply","arguments","timeout","play1","$event","_createVNode","_Transition","_withCtx","_component_pop_list","ref","flag","onClickItem","_"],"sourceRoot":""}