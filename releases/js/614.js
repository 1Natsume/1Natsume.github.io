"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[614],{3138:(t,n,e)=>{e.r(n),e.d(n,{default:()=>k});var o=e(641),c=e(3751),m={id:"articles_comment"},i={class:"comment-top"},s={class:"right-bar-wrap"},a={class:"comment-textarea"},r={class:"comment-bottom"},l={class:"opt-bar"},u={class:"ext-wrap"},d={class:"comment-btn"};var f=e(950),p=e(6577),h=e(664);const C={props:{articleId:{default:-1}},data:function(){return{commentId:"",commentBody:"",replayCommentId:"",replayCommenter:""}},name:"ArticleComment",methods:{pushCommentEvent:function(){var t=this;this.commentId?h.A.updateComment(this.commentId,this.commentBody).then((function(n){t.$bus.emit("commentUpdateEvent"),f.A.showInfoMsg("评论更新成功"),t.cancelCommentEvent()})):h.A.addComment(this.articleId,this.commentBody,this.replayCommentId).then((function(n){t.$bus.emit("commentCommitEvent"),f.A.showInfoMsg("评论提交成功"),t.cancelCommentEvent()}))},cancelCommentEvent:function(){this.commentId="",this.commentBody="",this.replayCommentId="",this.replayCommenter=""},setReplayCommentId:function(t,n){this.replayCommentId=t,this.replayCommenter=n,this.commentBody="@"+n+"\n"+this.commentBody,this.$refs.refTextArea.focus()},setQuoteCommentId:function(t,n){var e=this;this.replayCommentId=t,this.replayCommenter=n,h.A.getCommentBody(t).then((function(t){var o="@"+n+"\n";t.split("\n").forEach((function(t,n){o=o+"> "+t+"\n"})),o+="\n",e.commentBody=o+e.commentBody,e.$refs.refTextArea.focus()}))},setUpdateCommentId:function(t){var n=this;this.commentId=t,h.A.getCommentBody(t).then((function(t){n.commentBody=t+"\n"})),this.$refs.refTextArea.focus()},quickResponseEven:function(){this.commentBody="滴，打卡上车  "+BlogUtils.getNowTime()},openFaceEven:function(){var t=this;this.$refs.faceBtn.isInit||(this.$refs.faceBtn.isInit=!0,p.A.initTextArea("comment_area_wrap",this.$refs.faceBtn,(function(n){t.commentBody=n})))},createWrap:function(t,n){var e=f.A.textAreaUtils,o=e.getTextareaCursor(this.$refs.refTextArea);o.text=t+o.text+n,e.addTextareaCursor(this.$refs.refTextArea,o,o.text)},commentQuote:function(){this.createWrap("> ","")},commentBold:function(){this.createWrap("**","**")},commentLink:function(){this.createWrap("[](",")")},commentCode:function(){this.createWrap("`","`")},commentImg:function(){var t=this;f.A.cnblogUtils.openImageUploadWindow((function(n){t.commentBody=t.commentBody+n}))}}};const k=(0,e(6262).A)(C,[["render",function(t,n,e,f,p,h){return(0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("div",null,[(0,o.Lk)("div",i,[n[10]||(n[10]=(0,o.Lk)("span",{class:"comment-title"},"发表评论",-1)),(0,o.Lk)("span",s,[(0,o.Lk)("span",{title:"引用",class:"icon iconfont pin",onClick:n[0]||(n[0]=function(t){return h.commentQuote()})}),(0,o.Lk)("span",{title:"加粗",class:"icon iconfont bold",onClick:n[1]||(n[1]=function(t){return h.commentBold()})}),(0,o.Lk)("span",{title:"链接",class:"icon iconfont link",onClick:n[2]||(n[2]=function(t){return h.commentLink()})}),(0,o.Lk)("span",{title:"代码块",class:"icon iconfont code",onClick:n[3]||(n[3]=function(t){return h.commentCode()})}),(0,o.Lk)("span",{title:"图片",class:"icon iconfont image-text",onClick:n[4]||(n[4]=function(t){return h.commentImg()})})])]),(0,o.Lk)("div",a,[(0,o.bo)((0,o.Lk)("textarea",{class:"middle-base-scroll",ref:"refTextArea","onUpdate:modelValue":n[5]||(n[5]=function(n){return t.commentBody=n}),id:"comment_area_wrap"},null,512),[[c.Jo,t.commentBody]])]),(0,o.Lk)("div",r,[(0,o.Lk)("div",l,[(0,o.Lk)("span",u,[(0,o.Lk)("span",{onClick:n[6]||(n[6]=function(){return h.openFaceEven&&h.openFaceEven.apply(h,arguments)}),ref:"faceBtn"},n[11]||(n[11]=[(0,o.Lk)("span",{class:"icon iconfont face2"},null,-1),(0,o.eW)(" 表情")]),512)])]),(0,o.Lk)("div",d,[""==t.commentId?((0,o.uX)(),(0,o.CE)("span",{key:0,onClick:n[7]||(n[7]=function(){return h.pushCommentEvent&&h.pushCommentEvent.apply(h,arguments)})},"发表评论")):(0,o.Q3)("",!0),""!=t.commentId?((0,o.uX)(),(0,o.CE)("span",{key:1,onClick:n[8]||(n[8]=function(){return h.pushCommentEvent&&h.pushCommentEvent.apply(h,arguments)})},"更新评论")):(0,o.Q3)("",!0),""!=t.commentId?((0,o.uX)(),(0,o.CE)("span",{key:2,onClick:n[9]||(n[9]=function(){return h.cancelCommentEvent&&h.cancelCommentEvent.apply(h,arguments)}),class:"cancel"},"取消修改")):(0,o.Q3)("",!0)])])])])}]])}}]);
//# sourceMappingURL=614.js.map