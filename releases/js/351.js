"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[351],{1351:(t,e,o)=>{o.r(e),o.d(e,{default:()=>O});var i=o(641),s={id:"blog_navicat_page"};var n=document,a=window,c=n.body,r=n.querySelector.bind(n),h=n.querySelectorAll.bind(n),l=(a.requestAnimationFrame,/Mobile|Android|iOS|iPhone|iPad|iPod|Windows Phone|KFAPWI/i.test(navigator.userAgent)),f=l?"touchstart":"mouseenter",d=l?"touchend":"mouseleave",p=l?"touchend":"click",u=l?"orientationchange":"resize",v="scroll",g="vertical",m="horizontal",y=function(t){return t instanceof HTMLElement},b=function(t){return"string"==typeof t},x=function(t){return"[object Object]"===Object.prototype.toString.call(t)},E=function(t){var e=function(t,e,o){if(t&&!o)return a.getComputedStyle(t).getPropertyValue(e);t.style[e]=o}(t,"position");return e&&"static"!==e},B=n.documentElement.clientHeight,S="toc",w="*[data-toc]",L={dom:w,classNames:{toc:S,fxied:"".concat(S,"-fixed"),brand:"".concat(S,"-brand"),navbar:"".concat(S,"-navbar"),hightlight:"".concat(S,"-hightlight"),nav:"".concat(S,"-nav"),link:"".concat(S,"-link"),active:"active",marginLeft1:"ml-1",marginLeft2:"ml-2",marginLeft3:"ml-3",marginLeft4:"ml-4",marginLeft5:"ml-5",marginLeft6:"ml-6"},hightlight:!0,brand:"目录",shadow:"shadow",idPrefix:"toc-heading-",offsetBody:c,tocFixed:{top:24,left:0},maxDepth:6,autoScroll:!0},T=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return b(t)||y(t)?e.dom=t:x(t)&&(e=t),this.options=Object.assign({},L,e),this.megre(),this.winEvents(),this};T.prototype={megre:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(x(t)){if(this.options=Object.assign({},this.options,t),b(this.options.dom)&&(this.options.dom=r(this.options.dom)||r(w)),!this.options.dom||!y(this.options.dom))throw new Error("Not found any content, Please sure this dom is exist");var e;this.options.maxDepth=(e=parseInt(this.options.maxDepth||6))>=1&&e<=6?e:6;var o=this.options.offsetBody;if(o&&o!==c)if(y(o))this.options.offsetBody=E(o)?o:c;else if(b(o)){var i=function(t){try{return r(t)}catch(t){return null}}(o);this.options.offsetBody=i&&i!==c&&E(o)?i:c}else this.options.offsetBody=c;else this.options.offsetBody=c;this.toc=r(this.options.dom.dataset.toc)||r(".".concat(this.options.classNames.toc));var s=this.toc&&this.toc.classList;return s&&!s.contains(this.options.classNames.toc)&&s.add(this.options.classNames.toc),this}},reload:function(){this.hightlight=!0===this.options.hightlight?r(".".concat(this.options.classNames.hightlight)):null,this.navbar=this.navbar||r(".".concat(this.options.classNames.navbar)),this.tocEvent(),this.fixed(),this.shadow(),!this.elements&&(this.elements=this.loadHeadings()),this.events=[this.offsetBodyScrollEvent.bind(this)],this.offsetBodyScrollDebounce(),this.activeToc(),this.syncTocScroll(),this.setTocScroll()},winEvents:function(){var t=this;a.addEventListener(u,(function(){B=n.documentElement.clientHeight,t.debounce(t.setTocScroll,200).call(t)}))},setTocScroll:function(){this.resetTocScroll();var t=this.options.tocFixed,e=this.navbar;if(this.options.autoScroll&&t&&this.toc.offsetHeight+(t.top||0)>B){var o=B-this.getOffsetY(e)-(t.top||0);e.style.maxHeight=o+"px",e.style.overflowY="auto"}},resetTocScroll:function(){this.navbar.style.maxHeight="inherit",this.navbar.style.overflowY="inherit"},syncTocScroll:function(){var t=this.navbar,e=this.active;if(e&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return e===g?t.scrollHeight>t.clientHeight:e===m&&t.scrollWidth>t.clientWidth}(t)){var o=e.offsetTop;t.scrollTo(0,o)}},offsetBodyScrollEvent:function(){this.activeToc(),this.syncTocScroll()},addOffsetBodyScrollEvent:function(){(this.options.offsetBody===c?a:this.options.offsetBody).addEventListener(v,this.events[0])},removeOffsetBodyScrollEvent:function(){(this.options.offsetBody===c?a:this.options.offsetBody).removeEventListener(v,this.events[0])},offsetBodyScrollDebounce:function(){this.removeOffsetBodyScrollEvent(),this.debounce(this.addOffsetBodyScrollEvent,200).call(this)},reset:function(){this.clear();var t=n.createDocumentFragment(),e=this.elements=this.loadHeadings(),o=e.targets,i=e.levels;if("string"==typeof this.options.brand){var s=n.createElement("div");s.classList.add(this.options.classNames.brand),s.textContent=this.options.brand,t.appendChild(s)}var a=n.createElement("div");if(a.classList.add(this.options.classNames.navbar),t.appendChild(a),this.navbar=a,!0===this.options.hightlight){var c=n.createElement("div");c.classList.add(this.options.classNames.hightlight),a.appendChild(c)}var r=this.options.classNames.nav,h=null,l=1;i.forEach((function(t,e,i){var s=o[e];if(s)if(0===e||i[e-1]!==t){var c=n.createElement("nav");if(c.classList.add(r),c.appendChild(s),1===t)a.appendChild(c);else if(t>=l)h.appendChild(c);else{for(var f=h.parentNode,d=0;d<l-t-1;d++)f=f.parentNode;f&&f.appendChild(c)}h=c,l=t}else h.appendChild(s)})),this.toc.appendChild(t),this.reload()},getOffsetBodyScrollTop:function(){var t=this.options.offsetBody;return t===a?t.pageYOffset:t===c?n.documentElement.scrollTop||c.scrollTop:t.scrollTop},GID:function(){var t=0,e=this.options.idPrefix;return{next:function(){return t++,{value:"".concat(e).concat(t)}}}},debounce:function(t,e){return function(){var o=this,i=arguments;t.timer&&clearTimeout(t.timer),t.timer=setTimeout((function(){t.apply(o,i)}),e)}},empty:function(t){if(t&&y(t))for(;t.lastChild;)t.removeChild(t.lastChild)},clear:function(){this.empty(this.toc),this.elements=null},activeToc:function(){var t=this.elements,e=t.offsets,o=t.targets,i=this.getOffsetBodyScrollTop(),s=o[e.findIndex((function(t){return Number(t)>i}))];s&&this.setActive(s)},getOffsetY:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,o=t.offsetTop;return t.offsetParent&&t.offsetParent!==e&&(o+=this.getOffsetY(t.offsetParent)),o},loadHeadings:function(){var t=this,e=this.options.maxDepth,o=e,i=Array.from(this.options.dom.querySelectorAll(["h1","h2","h3","h4","h5","h6"].slice(0,e).join(","))||[]),s=this.GID();i.forEach((function(e,i,a){var c=function(t,e,i){if(i<=1||0===e)return 1;if(i>o)return o;for(var s=t.filter((function(t,o){return o<e})),n=s.length-1;n>=0;n--){var a=s[n][1],c=+s[n][3].nodeName[1];if(i<c)return i>a?a:i;if(i===c)return a;if(c<i)return a+1}}(a,i,+e.nodeName[1]),r=t.getOffsetY(e,t.options.offsetBody);!function(t){t.id&&1===h("#".concat(t.id)).length||(t.id=s.next().value)}(e);var l=function(e,o){if(!e.textContent.replace(/\s/g,""))return!1;var i=t.toc.querySelector('a[href="#'.concat(e.id,'"]'));return i||((i=n.createElement("a")).href="#".concat(e.id),i.classList.add(t.options.classNames.link),o>=2&&i.classList.add("".concat(t.options.classNames["marginLeft".concat(o-1)])),i.textContent=e.textContent),i}(e,c);a.splice(i,1,[i,c,r,e,l])}));var a={levels:[],offsets:[],sources:[],targets:[]};return i.forEach((function(t,e){a.levels[e]=t[1],a.offsets[e]=t[2],a.sources[e]=t[3],a.targets[e]=t[4]})),a},setActive:function(t){var e=this.active,o=e?e.classList:[],i=this.options.classNames.active,s=".".concat(this.options.classNames.link,".").concat(this.options.classNames.active);e&&o.contains(i)&&o.remove(i),o=(e=this.active=t&&y(t)?t:r(s))&&(e.classList||[]),e&&!o.contains(i)&&o.add(i),this.setHightlight(e)},setHightlight:function(t){this.hightlight&&(t?(this.hightlight.style.top=t.offsetTop+"px",this.hightlight.style.height=t.offsetHeight+"px"):(this.hightlight.style.top=0,this.hightlight.style.height=0))},__enter:function(t){this.setHightlight(t.target)},__leave:function(){this.setActive(this.active)},__click:function(t){this.offsetBodyScrollDebounce(),this.setActive(t.target)},tocEvent:function(){if(this.hightlight){var t=this;Array.from(h(".".concat(this.options.classNames.toc," .").concat(this.options.classNames.link))||[]).forEach((function(e){e.addEventListener(f,t.__enter.bind(t)),e.addEventListener(d,t.__leave.bind(t)),e.addEventListener(p,t.__click.bind(t))}))}},shadow:function(){if(!1!==this.options.shadow){var t=this.toc,e=t&&(t.classList||[]),o=this.options.shadow;!e.contains(o)&&e.add(o)}},fixed:function(){var t=this.toc,e=this.options.tocFixed;if(t){var o=this.options.classNames.fxied,i=t.classList;!1===e?(t.style.top="inherit",t.style.left="inherit",i.contains(o)&&i.remove(o)):(!i.contains(o)&&i.add(o),e.top&&(t.style.top=e.top+"px"),e.left&&(t.style.left=e.left+"px"))}}};const _=T;var N=o(950),C=o(8105);const A={name:"BlogNavicatPage",data:function(){return{isOpenFullScreen:!1}},beforeRouterEnter:function(){$("#toc_page").empty()},created:function(){C.A.on("articleDestroy",(function(t){$("#blog_cloud_ad").show(),$("#toc_page").empty()})),C.A.on("articleInited",(function(t){if($("#blog_cloud_ad").hide(),$(t).attr("data-toc","#toc_page"),0!=$("#app div[data-toc]").length){$("#toc_page").empty(),new _({dom:"#app div[data-toc]",offsetBody:document.querySelector("#app .body-wrap")}).reset();var e=$("#toc_page");e.css("max-width","100%"),e.css("top","0"),e.css("padding","0"),e.css("margin","0"),$("#toc_page .toc-fixed").css("box-shadow","0"),N.A.registerAnchorFunc(e);var o=$("<span class='icon iconfont top topBtn topBtnDown'></span>");o.click((function(){o.hasClass("topBtnDown")?C.A.emit("panelToBottom",{}):C.A.emit("panelToTop",{})})),$("#toc_page .toc-brand").append(o),$(".toc-nav").css("max-height",$(".body-wrap").height()-140+"px"),C.A.on("panelScrollEven",(function(t){var e=$(".blog-navicat-page"),i=$(".pub-head").height()+$(".pub-body").height();t.target.scrollTop>i?(o.removeClass("topBtnDown"),e.css("position","fixed"),e.css("top","60px"),$(".toc-nav").css("max-height",$(".body-wrap").height()-100+"px")):($(".toc-nav").css("max-height",$(".body-wrap").height()-140+"px"),o.addClass("topBtnDown"),e.css("position",""),e.css("top",""))}))}}))}};const O=(0,o(6262).A)(A,[["render",function(t,e,o,n,a,c){return(0,i.uX)(),(0,i.CE)("div",s,e[0]||(e[0]=[(0,i.Lk)("div",{class:"blog-navicat-page"},[(0,i.Lk)("div",{id:"toc_page"})],-1)]))}]])}}]);
//# sourceMappingURL=351.js.map