"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[979],{4729:(t,n,e)=>{e.r(n),e.d(n,{default:()=>It});var i=e(641),o={id:"article_body"};var s=e(664),a=e(33),c={id:"article_title"},l={class:"article-page-head-wrap"},r={class:"author-title"},m={class:"author-sign"},u={class:"label-item"},d={class:""};var p=e(7118);const f={props:{articleInfo:{type:Object}},data:function(){return{articleName:p.A.blogName}},name:"ArticleTitle",methods:{}};var h=e(6262);const k=(0,h.A)(f,[["render",function(t,n,e,o,s,p){return(0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("div",l,[(0,i.Lk)("div",r,[(0,i.Lk)("span",null,(0,a.v_)(e.articleInfo.title),1),(0,i.Lk)("span",{class:"fangdabtn icon iconfont fangda",onClick:n[0]||(n[0]=function(n){return t.$emit("openFullScreenEven")})})]),(0,i.Lk)("div",m,[(0,i.Lk)("span",null,[n[1]||(n[1]=(0,i.Lk)("span",{class:"icon iconfont renyuanguanli"},null,-1)),(0,i.Lk)("span",null,(0,a.v_)(t.articleName),1)]),(0,i.Lk)("span",null,[n[2]||(n[2]=(0,i.Lk)("span",{class:"icon iconfont ios-shijian"},null,-1)),(0,i.Lk)("span",null,(0,a.v_)(e.articleInfo.time),1)]),(0,i.Lk)("span",null,[n[3]||(n[3]=(0,i.Lk)("span",{class:"icon iconfont see"},null,-1)),(0,i.Lk)("span",null,(0,a.v_)(e.articleInfo.viewCount),1),n[4]||(n[4]=(0,i.Lk)("span",null,"次浏览",-1))]),(0,i.Lk)("span",null,[n[5]||(n[5]=(0,i.Lk)("span",{class:"icon iconfont talk"},null,-1)),(0,i.Lk)("span",null,(0,a.v_)(e.articleInfo.commentCount),1),n[6]||(n[6]=(0,i.Lk)("span",null,"条评论",-1))]),(0,i.Lk)("span",null,[n[7]||(n[7]=(0,i.Lk)("span",{class:"icon iconfont pen"},null,-1)),(0,i.Lk)("span",null,(0,a.v_)(e.articleInfo.fontNum),1),n[8]||(n[8]=(0,i.Lk)("span",null,"字数",-1))]),(0,i.Lk)("span",null,[n[9]||(n[9]=(0,i.Lk)("span",{class:"icon iconfont label"},null,-1)),(0,i.Lk)("span",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.articleInfo.articleLabels,(function(t){return(0,i.uX)(),(0,i.CE)("span",u,[(0,i.Lk)("span",d,(0,a.v_)(t.title),1)])})),256))])])])])])}]]);var C={id:"article_pre_line"},g={class:"post-body-head post-body-title"},v={class:"right-area"};var L=e(2555);const I={name:"ArticlePreLine",methods:{openWeiBo:function(){L.A.shareToTsina()},openWechat:function(){L.A.shareOnWechat()}}},b=(0,h.A)(I,[["render",function(t,n,e,o,s,a){return(0,i.uX)(),(0,i.CE)("div",C,[(0,i.Lk)("div",g,[n[3]||(n[3]=(0,i.Lk)("span",{class:"icon iconfont home"},null,-1)),n[4]||(n[4]=(0,i.Lk)("span",null,"首页",-1)),n[5]||(n[5]=(0,i.Lk)("span",{class:"sep"}," / ",-1)),n[6]||(n[6]=(0,i.Lk)("span",null,"正文",-1)),(0,i.Lk)("span",v,[n[2]||(n[2]=(0,i.Lk)("span",null,"分享到 :",-1)),(0,i.Lk)("span",{class:"icon iconfont weibo",onClick:n[0]||(n[0]=function(){return a.openWeiBo&&a.openWeiBo.apply(a,arguments)})}),(0,i.Lk)("span",{class:"icon iconfont wechat",onClick:n[1]||(n[1]=function(){return a.openWechat&&a.openWechat.apply(a,arguments)})})])])])}]]);var y=e(3751),A={id:"article_desc"},E={class:"article-page-body-wrap"},B={class:"inner-body-wrap"},w=["innerHTML"],P={class:"body-wrap-bottom"},_={class:"post-body-bottom"},T={class:"post-article-right"};var W=e(950);const X={props:["articleObj"],name:"ArticleDesc",data:function(){return{isFucus:"",isDigg:""}},methods:{openEdit:function(){window.open(this.articleObj.editUrl)},initPageList:function(){var t=this;this.$nextTick((function(){t.articleObj.pageId&&s.A.loadBlogPostInfo(t.articleObj.pageId).then((function(n){t.isDigg=n.digg,t.isFucus=n.fucus,t.$bus.emit("articleInited",t.$refs.articleBody)}))}))},diggAction:function(){s.A.voteBlogPost(this.articleObj.pageId,!1).then((function(t){W.A.showInfoMsg(t.message)}))},fucusAction:function(){s.A.blogFollow().then((function(t){W.A.showInfoMsg(t)}))},addToWz:function(){return L.A.addToWz(this.articleObj.pageId)}},mounted:function(){this.initPageList()},watch:{articleObj:function(){this.initPageList()}},beforeUnmount:function(){this.$bus.emit("articleDestroy",!0)}},x=(0,h.A)(X,[["render",function(t,n,e,o,s,c){var l=(0,i.gN)("highlight");return(0,i.uX)(),(0,i.CE)("div",A,[(0,i.Lk)("div",E,[(0,i.Lk)("div",B,[(0,i.bo)((0,i.Lk)("div",{innerHTML:e.articleObj.body,ref:"articleBody"},null,8,w),[[l]]),(0,i.Lk)("div",P,[n[4]||(n[4]=(0,i.Lk)("span",{class:"icon iconfont ios-shijian"},null,-1)),(0,i.eW)(" 最后修改时间："+(0,a.v_)(e.articleObj.time),1)])]),(0,i.Lk)("div",_,[(0,i.Lk)("span",{class:"post-bottom-item",onClick:n[0]||(n[0]=function(t){return c.diggAction()})},[n[5]||(n[5]=(0,i.Lk)("span",{class:"icon iconfont zan"},null,-1)),(0,i.bo)((0,i.Lk)("span",null,"已推荐",512),[[y.aG,!t.isDigg]]),(0,i.bo)((0,i.Lk)("span",null,"点击推荐",512),[[y.aG,t.isDigg]])]),(0,i.Lk)("span",{class:"post-bottom-item",onClick:n[1]||(n[1]=function(t){return c.fucusAction()})},[n[6]||(n[6]=(0,i.Lk)("span",{class:"icon iconfont heart"},null,-1)),(0,i.bo)((0,i.Lk)("span",null,"已关注",512),[[y.aG,!t.isFucus]]),(0,i.bo)((0,i.Lk)("span",null,"点击关注",512),[[y.aG,t.isFucus]])]),(0,i.Lk)("span",{class:"post-bottom-item",onClick:n[2]||(n[2]=function(t){return c.addToWz()})},n[7]||(n[7]=[(0,i.Lk)("span",{class:"icon iconfont star"},null,-1),(0,i.eW)("收藏该文 ")]))]),(0,i.Lk)("div",T,[(0,i.Lk)("div",{onClick:n[3]||(n[3]=function(){return c.openEdit&&c.openEdit.apply(c,arguments)})},n[8]||(n[8]=[(0,i.Lk)("span",{class:"icon iconfont pen"},null,-1),(0,i.Lk)("span",null,"编辑",-1)]))])])])}]]);var Q={id:"articles_comment"},U={class:"comment-top"},M={class:"right-bar-wrap"},N={class:"comment-textarea"},O={class:"comment-bottom"},F={class:"opt-bar"},j={class:"ext-wrap"},z={class:"comment-btn"};var R=e(6577);const D={props:{articleId:{default:-1}},data:function(){return{commentId:"",commentBody:"",replayCommentId:"",replayCommenter:""}},name:"ArticleComment",methods:{pushCommentEvent:function(){var t=this;this.commentId?s.A.updateComment(this.commentId,this.commentBody).then((function(n){t.$bus.emit("commentUpdateEvent"),W.A.showInfoMsg("评论更新成功"),t.cancelCommentEvent()})):s.A.addComment(this.articleId,this.commentBody,this.replayCommentId).then((function(n){t.$bus.emit("commentCommitEvent"),W.A.showInfoMsg("评论提交成功"),t.cancelCommentEvent()}))},cancelCommentEvent:function(){this.commentId="",this.commentBody="",this.replayCommentId="",this.replayCommenter=""},setReplayCommentId:function(t,n){this.replayCommentId=t,this.replayCommenter=n,this.commentBody="@"+n+"\n"+this.commentBody,this.$refs.refTextArea.focus()},setQuoteCommentId:function(t,n){var e=this;this.replayCommentId=t,this.replayCommenter=n,s.A.getCommentBody(t).then((function(t){var i="@"+n+"\n";t.split("\n").forEach((function(t,n){i=i+"> "+t+"\n"})),i+="\n",e.commentBody=i+e.commentBody,e.$refs.refTextArea.focus()}))},setUpdateCommentId:function(t){var n=this;this.commentId=t,s.A.getCommentBody(t).then((function(t){n.commentBody=t+"\n"})),this.$refs.refTextArea.focus()},quickResponseEven:function(){this.commentBody="滴，打卡上车  "+BlogUtils.getNowTime()},openFaceEven:function(){var t=this;this.$refs.faceBtn.isInit||(this.$refs.faceBtn.isInit=!0,R.A.initTextArea("comment_area_wrap",this.$refs.faceBtn,(function(n){t.commentBody=n})))},createWrap:function(t,n){var e=W.A.textAreaUtils,i=e.getTextareaCursor(this.$refs.refTextArea);i.text=t+i.text+n,e.addTextareaCursor(this.$refs.refTextArea,i,i.text)},commentQuote:function(){this.createWrap("> ","")},commentBold:function(){this.createWrap("**","**")},commentLink:function(){this.createWrap("[](",")")},commentCode:function(){this.createWrap("`","`")},commentImg:function(){var t=this;W.A.cnblogUtils.openImageUploadWindow((function(n){t.commentBody=t.commentBody+n}))}}},H=(0,h.A)(D,[["render",function(t,n,e,o,s,a){return(0,i.uX)(),(0,i.CE)("div",Q,[(0,i.Lk)("div",null,[(0,i.Lk)("div",U,[n[10]||(n[10]=(0,i.Lk)("span",{class:"comment-title"},"发表评论",-1)),(0,i.Lk)("span",M,[(0,i.Lk)("span",{title:"引用",class:"icon iconfont pin",onClick:n[0]||(n[0]=function(t){return a.commentQuote()})}),(0,i.Lk)("span",{title:"加粗",class:"icon iconfont bold",onClick:n[1]||(n[1]=function(t){return a.commentBold()})}),(0,i.Lk)("span",{title:"链接",class:"icon iconfont link",onClick:n[2]||(n[2]=function(t){return a.commentLink()})}),(0,i.Lk)("span",{title:"代码块",class:"icon iconfont code",onClick:n[3]||(n[3]=function(t){return a.commentCode()})}),(0,i.Lk)("span",{title:"图片",class:"icon iconfont image-text",onClick:n[4]||(n[4]=function(t){return a.commentImg()})})])]),(0,i.Lk)("div",N,[(0,i.bo)((0,i.Lk)("textarea",{class:"middle-base-scroll",ref:"refTextArea","onUpdate:modelValue":n[5]||(n[5]=function(n){return t.commentBody=n}),id:"comment_area_wrap"},null,512),[[y.Jo,t.commentBody]])]),(0,i.Lk)("div",O,[(0,i.Lk)("div",F,[(0,i.Lk)("span",j,[(0,i.Lk)("span",{onClick:n[6]||(n[6]=function(){return a.openFaceEven&&a.openFaceEven.apply(a,arguments)}),ref:"faceBtn"},n[11]||(n[11]=[(0,i.Lk)("span",{class:"icon iconfont face2"},null,-1),(0,i.eW)(" 表情")]),512)])]),(0,i.Lk)("div",z,[""==t.commentId?((0,i.uX)(),(0,i.CE)("span",{key:0,onClick:n[7]||(n[7]=function(){return a.pushCommentEvent&&a.pushCommentEvent.apply(a,arguments)})},"发表评论")):(0,i.Q3)("",!0),""!=t.commentId?((0,i.uX)(),(0,i.CE)("span",{key:1,onClick:n[8]||(n[8]=function(){return a.pushCommentEvent&&a.pushCommentEvent.apply(a,arguments)})},"更新评论")):(0,i.Q3)("",!0),""!=t.commentId?((0,i.uX)(),(0,i.CE)("span",{key:2,onClick:n[9]||(n[9]=function(){return a.cancelCommentEvent&&a.cancelCommentEvent.apply(a,arguments)}),class:"cancel"},"取消修改")):(0,i.Q3)("",!0)])])])])}]]);var q={id:"article_message"},G={class:"article-message-wrap"},V={key:0,class:"message-body-nocomment"},K={key:1,class:"message-body-warp"},J={class:"body-item"},S={class:"avatar-img"},Y=["src","onClick"],Z={class:"message-desc"},tt=["onClick"],nt={class:"desc-level"},et={class:"desc-author"},it={class:"desc-date"},ot=["innerHTML"],st={class:"message-btn-wrap"},at={class:"message-btn btn1"},ct=["onClick"],lt=["onClick"],rt=["onClick"],mt=["onClick"],ut={class:"message-btn btn2"},dt=["onClick"],pt=["onClick"];const ft={name:"ArticleMessage",components:{Pagination:e(6801).A},props:{articleId:{default:-1}},data:function(){return{pageNum:1,messageList:[],messageCount:0,messageCurrent:1}},watch:{articleId:function(){this.initMyCommentList(this.articleId,1)}},created:function(){var t=this;this.initMyCommentList(this.articleId,1),this.$bus.on("commentCommitEvent",(function(){t.initMyCommentList(t.articleId,1)})),this.$bus.on("commentUpdateEvent",(function(){t.initMyCommentList(t.articleId,1)}))},methods:{openCommenter:function(t){window.open(t)},commentOpeEvent:function(t){W.A.showInfoMsg(t.message),this.initMyCommentList(this.articleId,this.pageNum)},diggComment:function(t){s.A.diggComment(this.articleId,t,!1).then(this.commentOpeEvent)},burryComment:function(t){s.A.buryComment(this.articleId,t,!1).then(this.commentOpeEvent)},delComment:function(t){s.A.deleteComment(t,0,this.articleId).then(this.commentOpeEvent)},updateComment:function(t){this.$emit("noticeUpdateEvent",t)},replayComment:function(t,n){this.$emit("noticeReplayEvent",t,n)},quoteComment:function(t,n){this.$emit("noticeQuoteEvent",t,n)},clickPage:function(t){this.initMyCommentList(this.articleId,t)},initMyCommentList:function(t,n){var e=this;this.pageNum=n,this.$bus.emit("barLoadingOpen"),s.A.loadMyCommentList(t,n).then((function(t){e.messageList.splice(0,e.messageList.length),t.list.forEach((function(t){t.desc=R.A.parseText(t.desc),e.messageList.push(t)})),e.messageCount=parseInt(t.count),e.messageCurrent=parseInt(t.current),e.$bus.emit("barLoadingClose")}))}}},ht=(0,h.A)(ft,[["render",function(t,n,e,o,s,c){var l=(0,i.g2)("pagination");return(0,i.uX)(),(0,i.CE)("div",q,[(0,i.Lk)("div",G,[n[2]||(n[2]=(0,i.Lk)("div",{class:"message-title"}," 评论列表 ",-1)),t.messageList&&0!=t.messageList.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",V,"暂无评论")),t.messageList&&t.messageList.length>0?((0,i.uX)(),(0,i.CE)("div",K,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.messageList,(function(t){return(0,i.uX)(),(0,i.CE)("div",J,[(0,i.Lk)("div",S,[(0,i.Lk)("img",{src:t.avatarHdUrl,onClick:function(n){return c.openCommenter(t.authorUrl)}},null,8,Y)]),(0,i.Lk)("div",Z,[(0,i.Lk)("div",{class:"message-desc-bar",onClick:function(n){return c.openCommenter(t.authorUrl)}},[(0,i.Lk)("span",nt,(0,a.v_)(t.level),1),(0,i.Lk)("span",et,(0,a.v_)(t.author),1)],8,tt),(0,i.Lk)("div",null,[(0,i.Lk)("span",it,(0,a.v_)(t.date),1)]),(0,i.Lk)("div",null,[(0,i.Lk)("div",{class:"desc-content",innerHTML:t.desc},null,8,ot)])]),(0,i.Lk)("div",st,[(0,i.Lk)("div",at,[t.delBtn?((0,i.uX)(),(0,i.CE)("span",{key:0,onClick:function(n){return c.delComment(t.commentId)}},"删除",8,ct)):(0,i.Q3)("",!0),t.updateBtn?((0,i.uX)(),(0,i.CE)("span",{key:1,onClick:function(n){return c.updateComment(t.commentId)}},"修改",8,lt)):(0,i.Q3)("",!0),t.replayBtn?((0,i.uX)(),(0,i.CE)("span",{key:2,onClick:function(n){return c.replayComment(t.commentId,t.author)}},"回复",8,rt)):(0,i.Q3)("",!0),t.quoteBtn?((0,i.uX)(),(0,i.CE)("span",{key:3,onClick:function(n){return c.quoteComment(t.commentId,t.author)}},"引用",8,mt)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",ut,[(0,i.Lk)("span",{onClick:function(n){return c.burryComment(t.commentId)}},[n[0]||(n[0]=(0,i.Lk)("span",{class:"icon iconfont zan nozan"},null,-1)),(0,i.eW)((0,a.v_)(t.burry),1)],8,dt),(0,i.Lk)("span",{onClick:function(n){return c.diggComment(t.commentId)}},[n[1]||(n[1]=(0,i.Lk)("span",{class:"icon iconfont zan"},null,-1)),(0,i.eW)((0,a.v_)(t.digg),1)],8,pt)])])])})),256))])):(0,i.Q3)("",!0),t.messageList&&t.messageList.length>0?((0,i.uX)(),(0,i.Wv)(l,{key:2,"page-size":t.messageCount,"page-cur":t.messageCurrent,"max-page":"10",onClickPage:c.clickPage},null,8,["page-size","page-cur","onClickPage"])):(0,i.Q3)("",!0)])])}]]);var kt={id:"article_pre_pos"};const Ct={props:{articleId:{default:-1}},data:function(){return{prePos:{}}},name:"ArticlePrePos",methods:{initPrePos:function(){var t=this;s.A.loadPrevnext(this.articleId).then((function(n){t.prePos=n}))}},created:function(){this.initPrePos()},watch:{articleId:function(){this.initPrePos()}}},gt=(0,h.A)(Ct,[["render",function(t,n,e,o,s,a){var c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",kt,[t.prePos.preId?((0,i.uX)(),(0,i.Wv)(c,{key:0,class:"post-turning-pre",to:t.VUE_CTX+"/subject/p/"+t.prePos.preId+".html"},{default:(0,i.k6)((function(){return n[0]||(n[0]=[(0,i.eW)("上一篇")])})),_:1},8,["to"])):(0,i.Q3)("",!0),t.prePos.posId?((0,i.uX)(),(0,i.Wv)(c,{key:1,class:"post-turning-pos",to:t.VUE_CTX+"/subject/p/"+t.prePos.posId+".html"},{default:(0,i.k6)((function(){return n[1]||(n[1]=[(0,i.eW)("下一篇")])})),_:1},8,["to"])):(0,i.Q3)("",!0)])}]]);var vt=e(8105);const Lt={name:"ArticleBody",components:{ArticlePrePos:gt,ArticleMessage:ht,ArticleComment:H,ArticleDesc:x,ArticleTitle:k,ArticlePreLine:b},data:function(){return{articleId:"",article:{},articleInfo:{title:"",time:"",viewCount:"",commentCount:"",fontNum:"",articleLabels:[]}}},created:function(){this.initArticle()},methods:{noticeUpdateEvent:function(t){this.$refs.articleComment.setUpdateCommentId(t)},noticeReplayEvent:function(t,n){this.$refs.articleComment.setReplayCommentId(t,n)},noticeQuoteEvent:function(t,n){this.$refs.articleComment.setQuoteCommentId(t,n)},initArticle:function(){var t=this;$("#blog").attr("class","handsome"),this.articleId=this.$route.params.articleId,Promise.all([s.A.loadArticle(this.articleId).then((function(n){t.article=n,t.articleInfo.fontNum=n.fontNum,t.articleInfo.title=n.title,t.articleInfo.time=n.time,t.articleInfo.viewCount=n.readNum})),s.A.loadCommentCount(this.articleId).then((function(n){t.articleInfo.commentCount=n})),s.A.loadCategoriesTags(this.articleId).then((function(n){t.articleInfo.articleLabels=n.tags}))]).then((function(){t.$nextTick((function(){vt.A.emit("fullLoadingClose")}))}))}},watch:{$route:function(){this.articleId!=this.$route.params.articleId&&this.initArticle()}}},It=(0,h.A)(Lt,[["render",function(t,n,e,s,a,c){var l=(0,i.g2)("article-title"),r=(0,i.g2)("article-pre-line"),m=(0,i.g2)("article-desc"),u=(0,i.g2)("article-pre-pos"),d=(0,i.g2)("article-comment"),p=(0,i.g2)("article-message");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(l,{"article-info":t.articleInfo},null,8,["article-info"]),(0,i.bF)(r),(0,i.bF)(m,{articleObj:t.article,class:"article-body-item"},null,8,["articleObj"]),(0,i.bF)(u,{"article-id":t.articleId,class:"article-body-margin"},null,8,["article-id"]),(0,i.bF)(d,{class:"article-body-item",ref:"articleComment","article-id":t.articleId},null,8,["article-id"]),(0,i.bF)(p,{class:"article-body-item","article-id":t.articleId,onNoticeReplayEvent:c.noticeReplayEvent,onNoticeQuoteEvent:c.noticeQuoteEvent,onNoticeUpdateEvent:c.noticeUpdateEvent},null,8,["article-id","onNoticeReplayEvent","onNoticeQuoteEvent","onNoticeUpdateEvent"])])}]])}}]);
//# sourceMappingURL=979.js.map